{"ast":null,"code":"var _jsxFileName = \"/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/src/context/system/systemState.js\";\nimport React, { useReducer } from 'react';\nimport systemContext from './systemContext';\nimport systemReducer from './systemReducer';\nimport { ADD_SYSTEM, GET_SYSTEMS, UPDATE_SYSTEM, SELECT_SYSTEM, DELETE_SYSTEM, DESELECT_SYSTEM, SHOW_ERROR } from '../../types/index';\nimport axiosClient from '../../config/axios';\n\nconst SystemState = props => {\n  const initialState = {\n    systems: [],\n    systemSelected: null,\n    message: null,\n    active: false\n  };\n  const [state, dispatch] = useReducer(systemReducer, initialState);\n\n  const addSystem = async system => {\n    try {\n      const res = await axiosClient.post('/api/systems', system);\n      dispatch({\n        type: ADD_SYSTEM,\n        payload: res.data\n      });\n      getSystems(system.asset);\n    } catch (error) {\n      const alert = {\n        msg: error.response.data.msg,\n        category: 'alerta-error'\n      };\n      dispatch({\n        type: SHOW_ERROR,\n        payload: alert\n      });\n    }\n  };\n\n  const getSystems = async asset => {\n    try {\n      const res = await axiosClient.get('/api/systems', {\n        params: {\n          asset\n        }\n      });\n      dispatch({\n        type: GET_SYSTEMS,\n        payload: res.data.systems\n      });\n    } catch (error) {}\n  };\n\n  const updateSystem = async system => {\n    try {\n      const id = system._id;\n      const res = await axiosClient.put(`/api/systems/${id}`, system);\n      dispatch({\n        type: UPDATE_SYSTEM\n      });\n      getSystems(system.asset);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const deleteSystem = async system => {\n    try {\n      const id = system._id;\n      const idAsset = system.asset;\n      const res = await axiosClient.delete(`/api/systems/${id}`, {\n        params: {\n          idAsset\n        }\n      });\n      dispatch({\n        type: DELETE_SYSTEM,\n        payload: system\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const selectSystem = system => {\n    dispatch({\n      type: SELECT_SYSTEM,\n      payload: system\n    });\n  };\n\n  const deselectSystem = () => {\n    dispatch({\n      type: DESELECT_SYSTEM\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(systemContext.Provider, {\n    value: {\n      systems: state.systems,\n      systemSelected: state.systemSelected,\n      active: state.active,\n      getSystems,\n      updateSystem,\n      addSystem,\n      selectSystem,\n      deleteSystem,\n      deselectSystem\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, props.children);\n};\n\nexport default SystemState;","map":{"version":3,"sources":["/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/src/context/system/systemState.js"],"names":["React","useReducer","systemContext","systemReducer","ADD_SYSTEM","GET_SYSTEMS","UPDATE_SYSTEM","SELECT_SYSTEM","DELETE_SYSTEM","DESELECT_SYSTEM","SHOW_ERROR","axiosClient","SystemState","props","initialState","systems","systemSelected","message","active","state","dispatch","addSystem","system","res","post","type","payload","data","getSystems","asset","error","alert","msg","response","category","get","params","updateSystem","id","_id","put","console","log","deleteSystem","idAsset","delete","selectSystem","deselectSystem","children"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,UAAf,QAAgC,OAAhC;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AAEA,SACIC,UADJ,EAEIC,WAFJ,EAGIC,aAHJ,EAIIC,aAJJ,EAKIC,aALJ,EAMIC,eANJ,EAOIC,UAPJ,QAQO,mBARP;AASA,OAAOC,WAAP,MAAwB,oBAAxB;;AAEA,MAAMC,WAAW,GAAIC,KAAD,IAAW;AAE3B,QAAMC,YAAY,GAAG;AACjBC,IAAAA,OAAO,EAAC,EADS;AAEjBC,IAAAA,cAAc,EAAC,IAFE;AAGjBC,IAAAA,OAAO,EAAC,IAHS;AAIjBC,IAAAA,MAAM,EAAC;AAJU,GAArB;AAOA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBnB,UAAU,CAACE,aAAD,EAAeW,YAAf,CAApC;;AAEA,QAAMO,SAAS,GAAG,MAAOC,MAAP,IAAgB;AAC9B,QAAI;AACA,YAAMC,GAAG,GAAG,MAAMZ,WAAW,CAACa,IAAZ,CAAiB,cAAjB,EAAiCF,MAAjC,CAAlB;AACAF,MAAAA,QAAQ,CAAC;AACLK,QAAAA,IAAI,EAACrB,UADA;AAELsB,QAAAA,OAAO,EAAEH,GAAG,CAACI;AAFR,OAAD,CAAR;AAIAC,MAAAA,UAAU,CAACN,MAAM,CAACO,KAAR,CAAV;AACH,KAPD,CAOE,OAAOC,KAAP,EAAc;AACZ,YAAMC,KAAK,GAAG;AACVC,QAAAA,GAAG,EAAEF,KAAK,CAACG,QAAN,CAAeN,IAAf,CAAoBK,GADf;AAEVE,QAAAA,QAAQ,EAAE;AAFA,OAAd;AAIAd,MAAAA,QAAQ,CAAC;AACLK,QAAAA,IAAI,EAACf,UADA;AAELgB,QAAAA,OAAO,EAACK;AAFH,OAAD,CAAR;AAIH;AAEJ,GAnBD;;AAoBA,QAAMH,UAAU,GAAG,MAAOC,KAAP,IAAgB;AAC/B,QAAI;AACA,YAAMN,GAAG,GAAG,MAAMZ,WAAW,CAACwB,GAAZ,CAAgB,cAAhB,EAAgC;AAACC,QAAAA,MAAM,EAAC;AAACP,UAAAA;AAAD;AAAR,OAAhC,CAAlB;AACAT,MAAAA,QAAQ,CAAC;AACLK,QAAAA,IAAI,EAACpB,WADA;AAELqB,QAAAA,OAAO,EAAEH,GAAG,CAACI,IAAJ,CAASZ;AAFb,OAAD,CAAR;AAKH,KAPD,CAOE,OAAOe,KAAP,EAAc,CAEf;AACJ,GAXD;;AAaA,QAAMO,YAAY,GAAG,MAAOf,MAAP,IAAiB;AAClC,QAAI;AACA,YAAMgB,EAAE,GAAGhB,MAAM,CAACiB,GAAlB;AACA,YAAMhB,GAAG,GAAG,MAAMZ,WAAW,CAAC6B,GAAZ,CAAiB,gBAAeF,EAAG,EAAnC,EAAqChB,MAArC,CAAlB;AAEAF,MAAAA,QAAQ,CAAC;AACLK,QAAAA,IAAI,EAACnB;AADA,OAAD,CAAR;AAIAsB,MAAAA,UAAU,CAACN,MAAM,CAACO,KAAR,CAAV;AAEH,KAVD,CAUE,OAAOC,KAAP,EAAc;AACZW,MAAAA,OAAO,CAACC,GAAR,CAAYZ,KAAZ;AAEH;AACJ,GAfD;;AAiBA,QAAMa,YAAY,GAAG,MAAOrB,MAAP,IAAiB;AAClC,QAAI;AACA,YAAMgB,EAAE,GAAGhB,MAAM,CAACiB,GAAlB;AACA,YAAMK,OAAO,GAAGtB,MAAM,CAACO,KAAvB;AACA,YAAMN,GAAG,GAAG,MAAMZ,WAAW,CAACkC,MAAZ,CAAoB,gBAAeP,EAAG,EAAtC,EAAyC;AAACF,QAAAA,MAAM,EAAC;AAACQ,UAAAA;AAAD;AAAR,OAAzC,CAAlB;AAEAxB,MAAAA,QAAQ,CAAC;AACLK,QAAAA,IAAI,EAACjB,aADA;AAELkB,QAAAA,OAAO,EAACJ;AAFH,OAAD,CAAR;AAIH,KATD,CASE,OAAOQ,KAAP,EAAc;AACZW,MAAAA,OAAO,CAACC,GAAR,CAAYZ,KAAZ;AAEH;AACJ,GAdD;;AAgBA,QAAMgB,YAAY,GAAIxB,MAAD,IAAW;AAC5BF,IAAAA,QAAQ,CAAC;AACLK,MAAAA,IAAI,EAAClB,aADA;AAELmB,MAAAA,OAAO,EAAEJ;AAFJ,KAAD,CAAR;AAIH,GALD;;AAOA,QAAMyB,cAAc,GAAG,MAAK;AACxB3B,IAAAA,QAAQ,CAAC;AACLK,MAAAA,IAAI,EAAChB;AADA,KAAD,CAAR;AAGH,GAJD;;AAMA,sBACI,oBAAC,aAAD,CAAe,QAAf;AACI,IAAA,KAAK,EAAG;AACJM,MAAAA,OAAO,EAACI,KAAK,CAACJ,OADV;AAEJC,MAAAA,cAAc,EAAEG,KAAK,CAACH,cAFlB;AAGJE,MAAAA,MAAM,EAACC,KAAK,CAACD,MAHT;AAIJU,MAAAA,UAJI;AAKJS,MAAAA,YALI;AAMJhB,MAAAA,SANI;AAOJyB,MAAAA,YAPI;AAQJH,MAAAA,YARI;AASJI,MAAAA;AATI,KADZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAaKlC,KAAK,CAACmC,QAbX,CADJ;AAiBH,CA3GD;;AA6GA,eAAepC,WAAf","sourcesContent":["import React, {useReducer} from 'react';\nimport systemContext from './systemContext'\nimport systemReducer from './systemReducer'\n\nimport {\n    ADD_SYSTEM, \n    GET_SYSTEMS,\n    UPDATE_SYSTEM,\n    SELECT_SYSTEM,\n    DELETE_SYSTEM,\n    DESELECT_SYSTEM,\n    SHOW_ERROR\n} from '../../types/index'\nimport axiosClient from '../../config/axios';\n\nconst SystemState = (props) => {\n\n    const initialState = {\n        systems:[],\n        systemSelected:null,\n        message:null,\n        active:false\n    }\n\n    const [state, dispatch] = useReducer(systemReducer,initialState)\n\n    const addSystem = async (system)=>{\n        try {\n            const res = await axiosClient.post('/api/systems', system)\n            dispatch({\n                type:ADD_SYSTEM,\n                payload: res.data\n            })\n            getSystems(system.asset)\n        } catch (error) {\n            const alert = {\n                msg: error.response.data.msg,\n                category: 'alerta-error'\n            }\n            dispatch({\n                type:SHOW_ERROR,\n                payload:alert\n            })\n        }\n\n    }\n    const getSystems = async (asset) =>{\n        try {\n            const res = await axiosClient.get('/api/systems', {params:{asset}})\n            dispatch({\n                type:GET_SYSTEMS,\n                payload: res.data.systems\n            })\n\n        } catch (error) {\n            \n        }\n    }\n\n    const updateSystem = async (system) =>{\n        try {\n            const id = system._id\n            const res = await axiosClient.put(`/api/systems/${id}`,system)\n            \n            dispatch({\n                type:UPDATE_SYSTEM\n            })\n\n            getSystems(system.asset)\n\n        } catch (error) {\n            console.log(error)\n\n        }\n    }\n\n    const deleteSystem = async (system) =>{\n        try {\n            const id = system._id\n            const idAsset = system.asset\n            const res = await axiosClient.delete(`/api/systems/${id}`, {params:{idAsset}})\n            \n            dispatch({\n                type:DELETE_SYSTEM,\n                payload:system\n            })\n        } catch (error) {\n            console.log(error)\n\n        }\n    }\n\n    const selectSystem = (system) =>{\n        dispatch({\n            type:SELECT_SYSTEM,\n            payload: system\n        })\n    }\n\n    const deselectSystem = () =>{\n        dispatch({\n            type:DESELECT_SYSTEM\n        })\n    }\n\n    return ( \n        <systemContext.Provider\n            value ={{\n                systems:state.systems,\n                systemSelected: state.systemSelected,\n                active:state.active,\n                getSystems,\n                updateSystem,\n                addSystem,\n                selectSystem,\n                deleteSystem,\n                deselectSystem\n            }}\n        >\n            {props.children}\n        </systemContext.Provider>\n     );\n}\n \nexport default SystemState;"]},"metadata":{},"sourceType":"module"}
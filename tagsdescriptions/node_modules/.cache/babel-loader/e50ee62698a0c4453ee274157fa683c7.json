{"ast":null,"code":"import _regeneratorRuntime from\"/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useReducer}from'react';import systemContext from'./systemContext';import systemReducer from'./systemReducer';import{ADD_SYSTEM,GET_SYSTEMS,UPDATE_SYSTEM,SELECT_SYSTEM,DELETE_SYSTEM,DESELECT_SYSTEM,SHOW_ERROR,RESET_MESSAGE}from'../../types/index';import axiosClient from'../../config/axios';var SystemState=function SystemState(props){var initialState={systems:[],systemSelected:null,message:null,active:false};var _useReducer=useReducer(systemReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var addSystem=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(system){var res,alert;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axiosClient.post('/api/systems',system);case 3:res=_context.sent;dispatch({type:ADD_SYSTEM,payload:res.data});getSystems(system.asset);_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);alert={msg:_context.t0.response.data.msg,category:'alerta-error'};dispatch({type:SHOW_ERROR,payload:alert});case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function addSystem(_x){return _ref.apply(this,arguments);};}();var getSystems=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(asset){var res,alert;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axiosClient.get('/api/systems',{params:{asset:asset}});case 3:res=_context2.sent;dispatch({type:GET_SYSTEMS,payload:res.data.systems});_context2.next=11;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);alert={msg:_context2.t0.response.data.msg,category:'alerta-error'};dispatch({type:SHOW_ERROR,payload:alert});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function getSystems(_x2){return _ref2.apply(this,arguments);};}();var updateSystem=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(system){var id,alert;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;id=system._id;_context3.next=4;return axiosClient.put(\"/api/systems/\".concat(id),system);case 4:dispatch({type:UPDATE_SYSTEM});getSystems(system.asset);_context3.next=12;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);alert={msg:_context3.t0.response.data.msg,category:'alerta-error'};dispatch({type:SHOW_ERROR,payload:alert});case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function updateSystem(_x3){return _ref3.apply(this,arguments);};}();var deleteSystem=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(system){var id,idAsset,alert;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;id=system._id;idAsset=system.asset;_context4.next=5;return axiosClient.delete(\"/api/systems/\".concat(id),{params:{idAsset:idAsset}});case 5:dispatch({type:DELETE_SYSTEM,payload:system});_context4.next=12;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](0);alert={msg:_context4.t0.response.data.msg,category:'alerta-error'};dispatch({type:SHOW_ERROR,payload:alert});case 12:case\"end\":return _context4.stop();}}},_callee4,null,[[0,8]]);}));return function deleteSystem(_x4){return _ref4.apply(this,arguments);};}();var resetMessage=function resetMessage(){dispatch({type:RESET_MESSAGE});};var selectSystem=function selectSystem(system){dispatch({type:SELECT_SYSTEM,payload:system});};var deselectSystem=function deselectSystem(){dispatch({type:DESELECT_SYSTEM});};return/*#__PURE__*/React.createElement(systemContext.Provider,{value:{systems:state.systems,systemSelected:state.systemSelected,active:state.active,message:state.message,getSystems:getSystems,updateSystem:updateSystem,addSystem:addSystem,selectSystem:selectSystem,deleteSystem:deleteSystem,deselectSystem:deselectSystem,resetMessage:resetMessage}},props.children);};export default SystemState;","map":{"version":3,"sources":["/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/src/context/system/systemState.js"],"names":["React","useReducer","systemContext","systemReducer","ADD_SYSTEM","GET_SYSTEMS","UPDATE_SYSTEM","SELECT_SYSTEM","DELETE_SYSTEM","DESELECT_SYSTEM","SHOW_ERROR","RESET_MESSAGE","axiosClient","SystemState","props","initialState","systems","systemSelected","message","active","state","dispatch","addSystem","system","post","res","type","payload","data","getSystems","asset","alert","msg","response","category","get","params","updateSystem","id","_id","put","deleteSystem","idAsset","delete","resetMessage","selectSystem","deselectSystem","children"],"mappings":"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","sourcesContent":["import React, {useReducer} from 'react';\nimport systemContext from './systemContext'\nimport systemReducer from './systemReducer'\n\nimport {\n    ADD_SYSTEM, \n    GET_SYSTEMS,\n    UPDATE_SYSTEM,\n    SELECT_SYSTEM,\n    DELETE_SYSTEM,\n    DESELECT_SYSTEM,\n    SHOW_ERROR,\n    RESET_MESSAGE\n} from '../../types/index'\nimport axiosClient from '../../config/axios';\n\nconst SystemState = (props) => {\n\n    const initialState = {\n        systems:[],\n        systemSelected:null,\n        message:null,\n        active:false\n    }\n\n    const [state, dispatch] = useReducer(systemReducer,initialState)\n\n    const addSystem = async (system)=>{\n        try {\n            const res = await axiosClient.post('/api/systems', system)\n            dispatch({\n                type:ADD_SYSTEM,\n                payload: res.data\n            })\n            getSystems(system.asset)\n        } catch (error) {\n            const alert = {\n                msg: error.response.data.msg,\n                category: 'alerta-error'\n            }\n            dispatch({\n                type:SHOW_ERROR,\n                payload:alert\n            })\n        }\n\n    }\n    const getSystems = async (asset) =>{\n        try {\n            const res = await axiosClient.get('/api/systems', {params:{asset}})\n            dispatch({\n                type:GET_SYSTEMS,\n                payload: res.data.systems\n            })\n\n        } catch (error) {\n            const alert = {\n                msg: error.response.data.msg,\n                category: 'alerta-error'\n            }\n            dispatch({\n                type:SHOW_ERROR,\n                payload:alert\n            })\n        }\n    }\n\n    const updateSystem = async (system) =>{\n        try {\n            const id = system._id\n            await axiosClient.put(`/api/systems/${id}`,system)\n            \n            dispatch({\n                type:UPDATE_SYSTEM\n            })\n\n            getSystems(system.asset)\n\n        } catch (error) {\n            const alert = {\n                msg: error.response.data.msg,\n                category: 'alerta-error'\n            }\n            dispatch({\n                type:SHOW_ERROR,\n                payload:alert\n            })\n\n        }\n    }\n\n    const deleteSystem = async (system) =>{\n        try {\n            const id = system._id\n            const idAsset = system.asset\n            await axiosClient.delete(`/api/systems/${id}`, {params:{idAsset}})\n            \n            dispatch({\n                type:DELETE_SYSTEM,\n                payload:system\n            })\n        } catch (error) {\n            const alert = {\n                msg: error.response.data.msg,\n                category: 'alerta-error'\n            }\n            dispatch({\n                type:SHOW_ERROR,\n                payload:alert\n            })\n\n        }\n    }\n    const resetMessage = () =>{\n        dispatch({\n            type:RESET_MESSAGE\n        })\n    }\n    const selectSystem = (system) =>{\n        dispatch({\n            type:SELECT_SYSTEM,\n            payload: system\n        })\n    }\n\n    const deselectSystem = () =>{\n        dispatch({\n            type:DESELECT_SYSTEM\n        })\n    }\n\n    return ( \n        <systemContext.Provider\n            value ={{\n                systems:state.systems,\n                systemSelected: state.systemSelected,\n                active:state.active,\n                message:state.message,\n                getSystems,\n                updateSystem,\n                addSystem,\n                selectSystem,\n                deleteSystem,\n                deselectSystem,\n                resetMessage\n            }}\n        >\n            {props.children}\n        </systemContext.Provider>\n     );\n}\n \nexport default SystemState;"]},"metadata":{},"sourceType":"module"}
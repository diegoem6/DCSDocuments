{"ast":null,"code":"var _jsxFileName = \"/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/src/context/asset/assetState.js\";\nimport React, { useReducer } from 'react';\nimport assetContext from './assetContext';\nimport assetReducer from './assetReducer';\nimport { FORM_ASSETS, GET_ASSETS, ADD_ASSET, SHOW_ERROR_ASSET, VALIDATE_ASSET, SELECT_ASSET, DELETE_ASSET } from '../../types/index';\nimport axiosClient from '../../config/axios';\nimport systemContext from '../system/systemContext';\n\nconst AssetState = props => {\n  const initialState = {\n    assets: [],\n    form: false,\n    error: false,\n    asset: null,\n    message: null\n  }; //Dispatch para ejecutar las acciones\n\n  const [state, dispatch] = useReducer(assetReducer, initialState); //defino las funciones para el CRUD de formularios\n\n  const showForm = () => {\n    dispatch({\n      type: FORM_ASSETS\n    });\n  };\n\n  const getAssets = async () => {\n    try {\n      const res = await axiosClient.get('/api/assets');\n      dispatch({\n        type: GET_ASSETS,\n        payload: res.data.assets\n      });\n    } catch (error) {\n      const alert = {\n        msg: \"hubo un error buscando los assets\",\n        category: \"alerta-error\"\n      };\n      dispatch({\n        type: SHOW_ERROR_ASSET,\n        payload: alert\n      });\n    }\n  };\n\n  const addAsset = async asset => {\n    try {\n      const res = await axiosClient.post('/api/assets', asset);\n      dispatch({\n        type: ADD_ASSET,\n        payload: res.data\n      });\n    } catch (error) {\n      const alert = {\n        msg: \"hubo un error creando el asset\",\n        category: \"alerta-error\"\n      };\n      dispatch({\n        type: SHOW_ERROR_ASSET,\n        payload: alert\n      });\n    }\n  };\n\n  const showError = () => {\n    dispatch({\n      type: VALIDATE_ASSET\n    });\n  };\n\n  const selectAsset = asset => {\n    dispatch({\n      type: SELECT_ASSET,\n      payload: asset\n    });\n  };\n\n  const deleteAsset = async asset => {\n    try {\n      const idAsset = asset._id;\n      await axiosClient.delete(`/api/assets/${idAsset}`);\n      dispatch({\n        type: DELETE_ASSET,\n        payload: idAsset\n      });\n    } catch (error) {\n      const alert = {\n        msg: \"hubo un error eliminando el asset\",\n        category: \"alerta-error\"\n      };\n      dispatch({\n        type: SHOW_ERROR_ASSET,\n        payload: alert\n      });\n    }\n  };\n\n  const getAssetTree = async () => {\n    try {\n      const res = await axiosClient.get('api/tree');\n      console.log(res);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(assetContext.Provider, {\n    value: {\n      assets: state.assets,\n      form: state.form,\n      error: state.error,\n      asset: state.asset,\n      message: state.message,\n      showForm,\n      getAssets,\n      addAsset,\n      showError,\n      selectAsset,\n      deleteAsset\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, props.children);\n};\n\nexport default AssetState;","map":{"version":3,"sources":["/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/src/context/asset/assetState.js"],"names":["React","useReducer","assetContext","assetReducer","FORM_ASSETS","GET_ASSETS","ADD_ASSET","SHOW_ERROR_ASSET","VALIDATE_ASSET","SELECT_ASSET","DELETE_ASSET","axiosClient","systemContext","AssetState","props","initialState","assets","form","error","asset","message","state","dispatch","showForm","type","getAssets","res","get","payload","data","alert","msg","category","addAsset","post","showError","selectAsset","deleteAsset","idAsset","_id","delete","getAssetTree","console","log","children"],"mappings":"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","sourcesContent":["import React, {useReducer} from 'react';\nimport assetContext from './assetContext'\nimport assetReducer from './assetReducer'\nimport {\n    FORM_ASSETS,      \n    GET_ASSETS,       \n    ADD_ASSET,       \n    SHOW_ERROR_ASSET,\n    VALIDATE_ASSET,  \n    SELECT_ASSET,    \n    DELETE_ASSET   } from '../../types/index'\nimport axiosClient from '../../config/axios'\nimport systemContext from '../system/systemContext';\n\n\nconst AssetState = props=>{\n    \n    \n    const initialState={\n        assets : [],\n        form:false,\n        error: false, \n        asset: null,\n        message:null\n    }\n\n    //Dispatch para ejecutar las acciones\n    const [state,dispatch] = useReducer(assetReducer, initialState)\n\n\n    //defino las funciones para el CRUD de formularios\n    const showForm =()=>{\n        dispatch({\n            type: FORM_ASSETS\n        })\n    }\n\n    const getAssets = async ()=>{\n        try {\n            const res = await axiosClient.get('/api/assets');\n            dispatch({\n                type: GET_ASSETS,\n                payload: res.data.assets\n            })\n        } catch (error) {\n            const alert = {\n                msg:\"hubo un error buscando los assets\",\n                category:\"alerta-error\"\n            }\n            dispatch({\n                type:SHOW_ERROR_ASSET,\n                payload: alert\n            })\n        }\n        \n    }\n\n    const addAsset = async asset =>{\n\n        try {\n            const res = await axiosClient.post('/api/assets',asset);\n            dispatch({\n                type: ADD_ASSET,\n                payload: res.data\n            })\n        } catch (error) {\n            const alert = {\n                msg:\"hubo un error creando el asset\",\n                category:\"alerta-error\"\n            }\n            dispatch({\n                type:SHOW_ERROR_ASSET,\n                payload: alert\n            })\n        }\n        \n        \n    }\n\n    const showError = () =>{\n        dispatch({\n            type: VALIDATE_ASSET\n        })\n    }\n\n    const selectAsset= (asset) =>{\n        dispatch({\n            type: SELECT_ASSET,\n            payload:asset\n        })\n    }\n\n    const deleteAsset = async (asset) =>{\n        try {\n            const idAsset = asset._id\n            \n            await axiosClient.delete(`/api/assets/${idAsset}`);\n            dispatch({\n                type:DELETE_ASSET,\n                payload:idAsset\n            })\n        } catch (error) {\n            const alert = {\n                msg:\"hubo un error eliminando el asset\",\n                category:\"alerta-error\"\n            }\n            dispatch({\n                type:SHOW_ERROR_ASSET,\n                payload: alert\n            })\n        }\n        \n       \n    }\n\n    const getAssetTree = async ()=>{\n        try {\n            const res = await axiosClient.get('api/tree')\n            console.log(res);\n        } catch (error) {\n            console.log(error)\n        }\n    }\n\n    return (\n        <assetContext.Provider\n            value={{\n                assets: state.assets,\n                form: state.form,\n                error: state.error,\n                asset: state.asset,\n                message: state.message,\n                showForm, \n                getAssets,\n                addAsset,\n                showError, \n                selectAsset,\n                deleteAsset\n            }}\n        >\n            {props.children}\n        </assetContext.Provider>\n    )\n\n}\n\nexport default AssetState;"]},"metadata":{},"sourceType":"module"}
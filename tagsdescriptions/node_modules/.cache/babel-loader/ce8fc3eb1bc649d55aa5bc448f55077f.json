{"ast":null,"code":"import _defineProperty from\"/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useEffect}from'react';import systemContext from'../../context/system/systemContext';import assetContext from'../../context/asset/assetContext';import alertContext from'../../context/alerts/alertContext.js';var SystemForm=function SystemForm(){var sContext=useContext(systemContext);var systemSelected=sContext.systemSelected,message=sContext.message,addSystem=sContext.addSystem,updateSystem=sContext.updateSystem,resetMessage=sContext.resetMessage;var aContext=useContext(assetContext);var asset=aContext.asset;var alContext=useContext(alertContext);var showAlert=alContext.showAlert;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState({name:''}),_useState4=_slicedToArray(_useState3,2),system=_useState4[0],setSystem=_useState4[1];useEffect(function(){if(message){showAlert(message.msg,message.category);resetMessage();}// eslint-disable-next-line\n},[message]);useEffect(function(){if(systemSelected){setSystem(systemSelected);}else{setSystem({name:''});}},[systemSelected]);if(!asset)return null;var name=system.name;var _asset=_slicedToArray(asset,1),assetActual=_asset[0];var onSubmit=function onSubmit(e){e.preventDefault();if(!name){showAlert(\"El nombre del sistema no puede estar vacío\",\"alerta-error\");return;}setError(false);system.asset=assetActual._id;system.active=false;if(systemSelected){updateSystem(system);}else{addSystem(system);}setSystem({name:''});};var onChange=function onChange(e){setSystem(_objectSpread({},system,_defineProperty({},e.target.name,e.target.value)));};return/*#__PURE__*/React.createElement(\"div\",{className:\"formulario\",onSubmit:onSubmit},/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"contenedor-input\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"input-text\",placeholder:\"Nombre del sistema\",name:\"name\",value:name,onChange:onChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"contenedor-input\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",className:\"btn btn-primario btn-submit btn-block\",value:systemSelected===null?\"Agregar sistema\":\"Guardar sistema\"}))),error?/*#__PURE__*/React.createElement(\"p\",{className:\"mensaje error\"},\"El nombre del sistema es obligatorio\"):null);};export default SystemForm;","map":{"version":3,"sources":["/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/src/components/system/systemForm.js"],"names":["React","useContext","useState","useEffect","systemContext","assetContext","alertContext","SystemForm","sContext","systemSelected","message","addSystem","updateSystem","resetMessage","aContext","asset","alContext","showAlert","error","setError","name","system","setSystem","msg","category","assetActual","onSubmit","e","preventDefault","_id","active","onChange","target","value"],"mappings":"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","sourcesContent":["import React, {useContext, useState, useEffect} from 'react';\nimport systemContext from '../../context/system/systemContext'\nimport assetContext from '../../context/asset/assetContext'\nimport alertContext from '../../context/alerts/alertContext.js'\n\n\nconst SystemForm = () => {\n\n    const sContext = useContext(systemContext)\n    const {systemSelected, message, addSystem, updateSystem, resetMessage} = sContext\n\n    const aContext = useContext(assetContext)\n    const {asset} = aContext\n\n    const alContext = useContext(alertContext)\n    const {showAlert} = alContext\n\n    const [error, setError] = useState(false)\n    const [system,setSystem] = useState({\n        name:''\n    })\n\n    useEffect(() => {\n        if(message){\n            showAlert(message.msg, message.category)\n            resetMessage();\n        }\n        // eslint-disable-next-line\n    }, [message])\n    \n    useEffect(() => {\n        if (systemSelected){\n            setSystem(systemSelected)\n        }else{\n            setSystem({name:''})\n        }\n    }, [systemSelected])\n\n    if (!asset) return null;\n\n    const {name} =  system\n\n    const [assetActual] = asset\n\n    const onSubmit = (e)=>{\n        e.preventDefault();\n        if(!name){\n            showAlert(\"El nombre del sistema no puede estar vacío\", \"alerta-error\")\n            return;\n        }\n        setError(false);\n        system.asset = assetActual._id\n        system.active = false\n        if (systemSelected){\n            updateSystem(system)\n        }else{\n            addSystem(system);\n        }\n        \n        setSystem({name:''});\n        \n    }\n    const onChange = (e)=>{\n        setSystem({\n            ...system,\n            [e.target.name]:e.target.value\n        })\n    }\n\n\n    return ( \n        <div className=\"formulario\"\n            onSubmit={onSubmit}>\n            <form>\n                <div \n                    className=\"contenedor-input\">\n                    <input \n                        type=\"text\"\n                        className=\"input-text\"\n                        placeholder=\"Nombre del sistema\"\n                        name=\"name\"\n                        value={name}\n                        onChange = {onChange}\n                    />\n                </div>\n                <div \n                    className=\"contenedor-input\">\n                    <input \n                        type=\"submit\"\n                        className=\"btn btn-primario btn-submit btn-block\"\n                        value={systemSelected === null ? \"Agregar sistema\":\"Guardar sistema\"}\n                    />\n                </div>\n\n            </form>\n            {error ? <p className=\"mensaje error\">El nombre del sistema es obligatorio</p> : null}\n        </div>\n     );\n}\n \nexport default SystemForm;"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/src/context/asset/assetState.js\";\nimport React, { useReducer } from 'react';\nimport assetContext from './assetContext';\nimport assetReducer from './assetReducer';\nimport { FORM_ASSETS, GET_ASSETS, ADD_ASSET, SHOW_ERROR_ASSET, VALIDATE_ASSET, SELECT_ASSET, DELETE_ASSET, GET_ASSETS_TREE } from '../../types/index';\nimport axiosClient from '../../config/axios';\nimport systemContext from '../system/systemContext';\n\nconst AssetState = props => {\n  const initialState = {\n    assets: [],\n    form: false,\n    error: false,\n    asset: null,\n    message: null,\n    assetsTree: [{}]\n  }; //Dispatch para ejecutar las acciones\n\n  const [state, dispatch] = useReducer(assetReducer, initialState); //defino las funciones para el CRUD de formularios\n\n  const showForm = () => {\n    dispatch({\n      type: FORM_ASSETS\n    });\n  };\n\n  const getAssets = async () => {\n    try {\n      const res = await axiosClient.get('/api/assets');\n      dispatch({\n        type: GET_ASSETS,\n        payload: res.data.assets\n      });\n    } catch (error) {\n      const alert = {\n        msg: \"hubo un error buscando los assets\",\n        category: \"alerta-error\"\n      };\n      dispatch({\n        type: SHOW_ERROR_ASSET,\n        payload: alert\n      });\n    }\n  };\n\n  const addAsset = async asset => {\n    try {\n      const res = await axiosClient.post('/api/assets', asset);\n      dispatch({\n        type: ADD_ASSET,\n        payload: res.data\n      });\n    } catch (error) {\n      const alert = {\n        msg: \"hubo un error creando el asset\",\n        category: \"alerta-error\"\n      };\n      dispatch({\n        type: SHOW_ERROR_ASSET,\n        payload: alert\n      });\n    }\n  };\n\n  const showError = () => {\n    dispatch({\n      type: VALIDATE_ASSET\n    });\n  };\n\n  const selectAsset = asset => {\n    dispatch({\n      type: SELECT_ASSET,\n      payload: asset\n    });\n  };\n\n  const deleteAsset = async asset => {\n    try {\n      const idAsset = asset._id;\n      await axiosClient.delete(`/api/assets/${idAsset}`);\n      dispatch({\n        type: DELETE_ASSET,\n        payload: idAsset\n      });\n    } catch (error) {\n      const alert = {\n        msg: \"hubo un error eliminando el asset\",\n        category: \"alerta-error\"\n      };\n      dispatch({\n        type: SHOW_ERROR_ASSET,\n        payload: alert\n      });\n    }\n  };\n\n  const getAssetTree = async () => {\n    try {\n      const res = await axiosClient.get('api/tree');\n      let assetsTree_temp = res.data.assets;\n      let j = 0;\n      let i = 0;\n      assetsTree_temp.forEach(i_asset => {\n        assetsTree_temp[j].key = i_asset._id;\n        assetsTree_temp[j].label = i_asset.name;\n        assetsTree_temp[j].nodes = i_asset.nodes;\n        i = 0;\n        assetsTree_temp[j].nodes.forEach(i_system => {\n          assetsTree_temp[j].nodes[i].key = i_system._id;\n          assetsTree_temp[j].nodes[i].label = i_system.name;\n          i = i + 1;\n        });\n        j = j + 1;\n      });\n      dispatch({\n        type: GET_ASSETS_TREE,\n        payload: assetsTree_temp\n      });\n    } catch (error) {\n      const alert = {\n        msg: \"hubo un error buscando los assets\",\n        category: \"alerta-error\"\n      };\n      dispatch({\n        type: SHOW_ERROR_ASSET,\n        payload: alert\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(assetContext.Provider, {\n    value: {\n      assets: state.assets,\n      form: state.form,\n      error: state.error,\n      asset: state.asset,\n      message: state.message,\n      assetsTree: state.assetsTree,\n      showForm,\n      getAssets,\n      addAsset,\n      showError,\n      selectAsset,\n      deleteAsset,\n      getAssetTree\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }\n  }, props.children);\n};\n\nexport default AssetState;","map":{"version":3,"sources":["/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/src/context/asset/assetState.js"],"names":["React","useReducer","assetContext","assetReducer","FORM_ASSETS","GET_ASSETS","ADD_ASSET","SHOW_ERROR_ASSET","VALIDATE_ASSET","SELECT_ASSET","DELETE_ASSET","GET_ASSETS_TREE","axiosClient","systemContext","AssetState","props","initialState","assets","form","error","asset","message","assetsTree","state","dispatch","showForm","type","getAssets","res","get","payload","data","alert","msg","category","addAsset","post","showError","selectAsset","deleteAsset","idAsset","_id","delete","getAssetTree","assetsTree_temp","j","i","forEach","i_asset","key","label","name","nodes","i_system","children"],"mappings":"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","sourcesContent":["import React, {useReducer} from 'react';\nimport assetContext from './assetContext'\nimport assetReducer from './assetReducer'\nimport {\n    FORM_ASSETS,      \n    GET_ASSETS,       \n    ADD_ASSET,       \n    SHOW_ERROR_ASSET,\n    VALIDATE_ASSET,  \n    SELECT_ASSET,    \n    DELETE_ASSET,\n    GET_ASSETS_TREE   } from '../../types/index'\nimport axiosClient from '../../config/axios'\nimport systemContext from '../system/systemContext';\n\n\nconst AssetState = props=>{\n    \n    \n    const initialState={\n        assets : [],\n        form:false,\n        error: false, \n        asset: null,\n        message:null, \n        assetsTree: [{}]\n    }\n\n    //Dispatch para ejecutar las acciones\n    const [state,dispatch] = useReducer(assetReducer, initialState)\n\n\n    //defino las funciones para el CRUD de formularios\n    const showForm =()=>{\n        dispatch({\n            type: FORM_ASSETS\n        })\n    }\n\n    const getAssets = async ()=>{\n        try {\n            const res = await axiosClient.get('/api/assets');\n            dispatch({\n                type: GET_ASSETS,\n                payload: res.data.assets\n            })\n        } catch (error) {\n            const alert = {\n                msg:\"hubo un error buscando los assets\",\n                category:\"alerta-error\"\n            }\n            dispatch({\n                type:SHOW_ERROR_ASSET,\n                payload: alert\n            })\n        }\n        \n    }\n\n    const addAsset = async asset =>{\n\n        try {\n            const res = await axiosClient.post('/api/assets',asset);\n            dispatch({\n                type: ADD_ASSET,\n                payload: res.data\n            })\n        } catch (error) {\n            const alert = {\n                msg:\"hubo un error creando el asset\",\n                category:\"alerta-error\"\n            }\n            dispatch({\n                type:SHOW_ERROR_ASSET,\n                payload: alert\n            })\n        }\n        \n        \n    }\n\n    const showError = () =>{\n        dispatch({\n            type: VALIDATE_ASSET\n        })\n    }\n\n    const selectAsset= (asset) =>{\n        dispatch({\n            type: SELECT_ASSET,\n            payload:asset\n        })\n    }\n\n    const deleteAsset = async (asset) =>{\n        try {\n            const idAsset = asset._id\n            \n            await axiosClient.delete(`/api/assets/${idAsset}`);\n            dispatch({\n                type:DELETE_ASSET,\n                payload:idAsset\n            })\n        } catch (error) {\n            const alert = {\n                msg:\"hubo un error eliminando el asset\",\n                category:\"alerta-error\"\n            }\n            dispatch({\n                type:SHOW_ERROR_ASSET,\n                payload: alert\n            })\n        }\n        \n       \n    }\n\n    const getAssetTree = async ()=>{\n        try {\n            const res = await axiosClient.get('api/tree')\n            \n            let assetsTree_temp = res.data.assets\n            let j = 0\n            let i = 0\n            assetsTree_temp.forEach(i_asset => {\n                assetsTree_temp[j].key = i_asset._id\n                assetsTree_temp[j].label = i_asset.name\n                assetsTree_temp[j].nodes = i_asset.nodes\n                i=0;\n                assetsTree_temp[j].nodes.forEach(i_system => {\n                    assetsTree_temp[j].nodes[i].key = i_system._id\n                    assetsTree_temp[j].nodes[i].label = i_system.name\n                    i = i+1;\n                })\n                j= j+1;\n            });\n            dispatch({\n                type: GET_ASSETS_TREE,\n                payload: assetsTree_temp\n            })\n\n\n        } catch (error) {\n            const alert = {\n                msg:\"hubo un error buscando los assets\",\n                category:\"alerta-error\"\n            }\n            dispatch({\n                type:SHOW_ERROR_ASSET,\n                payload: alert\n            })\n        }\n    }\n\n    return (\n        <assetContext.Provider\n            value={{\n                assets: state.assets,\n                form: state.form,\n                error: state.error,\n                asset: state.asset,\n                message: state.message,\n                assetsTree: state.assetsTree,\n                showForm, \n                getAssets,\n                addAsset,\n                showError, \n                selectAsset,\n                deleteAsset,\n                getAssetTree\n            }}\n        >\n            {props.children}\n        </assetContext.Provider>\n    )\n\n}\n\nexport default AssetState;"]},"metadata":{},"sourceType":"module"}
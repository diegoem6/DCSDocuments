{"ast":null,"code":"var _jsxFileName = \"/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/src/context/tagdescriptor/tagDescriptorState.js\";\nimport React, { useReducer } from 'react';\nimport tagDescriptorContext from './tagDescriptorContext';\nimport tagDescriptorReducer from './tagDescriptorReducer';\nimport { FORM_TAGDESCRIPTOR, GET_TAGDESCRIPTOR, CREATE_TAGDESCRIPTOR, SHOW_ERROR_TAGDESCRIPTOR, UPDATE_TAGDESCRIPTOR, SELECT_TAGDESCRIPTOR, DESELECT_TAGDESCRIPTOR, GET_TAGSDESCRIPTORS, DELETE_TAGDESCRIPTOR, SEARCH_TAGSDESCRIPTORS, RESET_MESSAGE, VALIDATE_TAGDESCRIPTOR, INVALIDATE_TAGDESCRIPTOR, CREATE_DOCUMENT, GET_TAGSDESCRIPTORS_RELATED } from '../../types/index';\nimport axiosClient from '../../config/axios';\n\nconst TagDescriptorState = props => {\n  const initialState = {\n    tagdescriptors: [],\n    searchtagdescriptors: [],\n    form: false,\n    tagname_ok: true,\n    tagdescriptor: null,\n    related: [],\n    message: null,\n    urlDoc: null\n  }; //Dispatch para ejecutar las acciones\n\n  const [state, dispatch] = useReducer(tagDescriptorReducer, initialState); //defino las funciones para el CRUD de tagdescriptor\n\n  const showForm = () => {\n    dispatch({\n      type: FORM_TAGDESCRIPTOR\n    });\n  };\n\n  const getTagsDescriptors = async system => {\n    try {\n      const res = await axiosClient.get('/api/tagsdescriptors', {\n        params: {\n          system\n        }\n      });\n      dispatch({\n        type: GET_TAGSDESCRIPTORS,\n        payload: res.data.tagsdescriptors\n      });\n    } catch (error) {\n      const alert = {\n        msg: \"hubo un error buscando los tagdescriptors\",\n        category: \"alerta-error\"\n      };\n      dispatch({\n        type: SHOW_ERROR_TAGDESCRIPTOR,\n        payload: alert\n      });\n    }\n  };\n\n  const searchTagsDescriptors = async search => {\n    try {\n      dispatch({\n        type: SEARCH_TAGSDESCRIPTORS,\n        payload: search.toUpperCase()\n      });\n    } catch (error) {\n      const alert = {\n        msg: \"hubo un error buscando los tagdescriptors\",\n        category: \"alerta-error\"\n      };\n      dispatch({\n        type: SHOW_ERROR_TAGDESCRIPTOR,\n        payload: alert\n      });\n    }\n  };\n\n  const getTagDescriptor = async id => {\n    try {\n      const res = await axiosClient.get(`/api/showtag/${id}`);\n      console.log(res);\n      dispatch({\n        type: GET_TAGDESCRIPTOR,\n        payload: res.data.tagdescriptor\n      });\n    } catch (error) {\n      const alert = {\n        msg: \"No existe el tag descriptor\",\n        category: \"alerta-error\"\n      };\n      dispatch({\n        type: SHOW_ERROR_TAGDESCRIPTOR,\n        payload: alert\n      });\n    }\n  };\n\n  const resetMessage = () => {\n    dispatch({\n      type: RESET_MESSAGE\n    });\n  };\n\n  const createTagDescriptor = async ptagdescriptor => {\n    try {\n      const res = await axiosClient.post('/api/tagsdescriptors', ptagdescriptor);\n      dispatch({\n        type: CREATE_TAGDESCRIPTOR,\n        payload: res.data\n      });\n    } catch (error) {\n      const alert = {\n        msg: error.response.data.msg,\n        category: \"alerta-error\"\n      };\n      dispatch({\n        type: SHOW_ERROR_TAGDESCRIPTOR,\n        payload: alert\n      });\n    }\n  };\n\n  const createDocument = async system => {\n    try {\n      const res = await axiosClient.get('/api/documents', {\n        params: {\n          system\n        }\n      });\n      dispatch({\n        type: CREATE_DOCUMENT,\n        payload: res.data\n      });\n    } catch (error) {\n      const alert = {\n        msg: error.response.data.msg,\n        category: \"alerta-error\"\n      };\n      dispatch({\n        type: SHOW_ERROR_TAGDESCRIPTOR,\n        payload: alert\n      });\n    }\n  };\n\n  const showError = () => {\n    dispatch({\n      type: SHOW_ERROR_TAGDESCRIPTOR\n    });\n  };\n\n  const selectTagDescriptor = id_tagdescriptor => {\n    dispatch({\n      type: SELECT_TAGDESCRIPTOR,\n      payload: id_tagdescriptor\n    });\n  };\n\n  const deselectTagDescriptor = id_tagdescriptor => {\n    dispatch({\n      type: DESELECT_TAGDESCRIPTOR\n    });\n  };\n\n  const deleteTagDescriptor = async idTagDescriptor => {\n    try {\n      await axiosClient.delete(`/api/tagsdescriptors/${idTagDescriptor}`);\n      dispatch({\n        type: DELETE_TAGDESCRIPTOR,\n        payload: idTagDescriptor\n      });\n    } catch (error) {\n      const alert = {\n        msg: \"hubo un error eliminando el tag descriptor\",\n        category: \"alerta-error\"\n      };\n      dispatch({\n        type: SHOW_ERROR_TAGDESCRIPTOR,\n        payload: alert\n      });\n    }\n  };\n\n  const validateTagname = async id => {\n    try {\n      await axiosClient.get(`/api/showtag/${id}`);\n      const alert = {\n        msg: \"El tag descriptor para ese tagname ya existe\",\n        category: \"alerta-error\"\n      };\n      dispatch({\n        type: INVALIDATE_TAGDESCRIPTOR,\n        payload: alert\n      });\n    } catch (error) {\n      dispatch({\n        type: VALIDATE_TAGDESCRIPTOR\n      });\n    }\n  };\n\n  const updateTagDescriptor = async tagdescriptor => {\n    try {\n      const id = tagdescriptor._id;\n      const res = await axiosClient.put(`/api/tagsdescriptors/${id}`, tagdescriptor);\n      dispatch({\n        type: UPDATE_TAGDESCRIPTOR,\n        payload: res.data.tag_descriptor_modified\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const getTagDescriptorsRelated = async id => {\n    try {\n      const res = await axiosClient.get(`/api/tagsdescriptors/related/${id}`);\n      console.log(res);\n      dispatch({\n        type: GET_TAGSDESCRIPTORS_RELATED,\n        payload: res.data.tagdescriptor\n      });\n    } catch (error) {\n      const alert = {\n        msg: \"No existen descriptores relacionados\",\n        category: \"alerta-error\"\n      };\n      dispatch({\n        type: SHOW_ERROR_TAGDESCRIPTOR,\n        payload: alert\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(tagDescriptorContext.Provider, {\n    value: {\n      tagdescriptors: state.tagdescriptors,\n      form: state.form,\n      error: state.error,\n      tagdescriptor: state.tagdescriptor,\n      message: state.message,\n      searchtagdescriptors: state.searchtagdescriptors,\n      tagname_ok: state.tagname_ok,\n      urlDoc: state.urlDoc,\n      showForm,\n      related: state.related,\n      getTagsDescriptors,\n      createTagDescriptor,\n      showError,\n      selectTagDescriptor,\n      deleteTagDescriptor,\n      getTagDescriptor,\n      deselectTagDescriptor,\n      updateTagDescriptor,\n      searchTagsDescriptors,\n      getTagDescriptorsRelated,\n      resetMessage,\n      validateTagname,\n      createDocument\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 9\n    }\n  }, props.children);\n};\n\nexport default TagDescriptorState;","map":{"version":3,"sources":["/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/src/context/tagdescriptor/tagDescriptorState.js"],"names":["React","useReducer","tagDescriptorContext","tagDescriptorReducer","FORM_TAGDESCRIPTOR","GET_TAGDESCRIPTOR","CREATE_TAGDESCRIPTOR","SHOW_ERROR_TAGDESCRIPTOR","UPDATE_TAGDESCRIPTOR","SELECT_TAGDESCRIPTOR","DESELECT_TAGDESCRIPTOR","GET_TAGSDESCRIPTORS","DELETE_TAGDESCRIPTOR","SEARCH_TAGSDESCRIPTORS","RESET_MESSAGE","VALIDATE_TAGDESCRIPTOR","INVALIDATE_TAGDESCRIPTOR","CREATE_DOCUMENT","GET_TAGSDESCRIPTORS_RELATED","axiosClient","TagDescriptorState","props","initialState","tagdescriptors","searchtagdescriptors","form","tagname_ok","tagdescriptor","related","message","urlDoc","state","dispatch","showForm","type","getTagsDescriptors","system","res","get","params","payload","data","tagsdescriptors","error","alert","msg","category","searchTagsDescriptors","search","toUpperCase","getTagDescriptor","id","console","log","resetMessage","createTagDescriptor","ptagdescriptor","post","response","createDocument","showError","selectTagDescriptor","id_tagdescriptor","deselectTagDescriptor","deleteTagDescriptor","idTagDescriptor","delete","validateTagname","updateTagDescriptor","_id","put","tag_descriptor_modified","getTagDescriptorsRelated","children"],"mappings":"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","sourcesContent":["import React, {useReducer} from 'react';\nimport tagDescriptorContext from './tagDescriptorContext'\nimport tagDescriptorReducer from './tagDescriptorReducer'\nimport {\n    FORM_TAGDESCRIPTOR, \n    GET_TAGDESCRIPTOR,\n    CREATE_TAGDESCRIPTOR,\n    SHOW_ERROR_TAGDESCRIPTOR,\n    UPDATE_TAGDESCRIPTOR,\n    SELECT_TAGDESCRIPTOR,\n    DESELECT_TAGDESCRIPTOR,\n    GET_TAGSDESCRIPTORS,\n    DELETE_TAGDESCRIPTOR,\n    SEARCH_TAGSDESCRIPTORS,\n    RESET_MESSAGE,\n    VALIDATE_TAGDESCRIPTOR,\n    INVALIDATE_TAGDESCRIPTOR,\n    CREATE_DOCUMENT,\n    GET_TAGSDESCRIPTORS_RELATED} from '../../types/index'\n\nimport axiosClient from '../../config/axios'\n\n\nconst TagDescriptorState = props=>{\n    \n    \n    const initialState={\n        tagdescriptors : [],\n        searchtagdescriptors: [],\n        form:false,\n        tagname_ok: true, \n        tagdescriptor: null,\n        related:[],\n        message:null,\n        urlDoc:null\n    }\n\n    //Dispatch para ejecutar las acciones\n    const [state,dispatch] = useReducer(tagDescriptorReducer, initialState)\n\n\n    //defino las funciones para el CRUD de tagdescriptor\n    const showForm =()=>{\n        dispatch({\n            type: FORM_TAGDESCRIPTOR\n        })\n    }\n\n    const getTagsDescriptors = async (system)=>{\n        try {\n            \n            const res = await axiosClient.get('/api/tagsdescriptors', {params:{system}});\n            dispatch({\n                type: GET_TAGSDESCRIPTORS,\n                payload: res.data.tagsdescriptors\n            })\n        } catch (error) {\n            const alert = {\n                msg:\"hubo un error buscando los tagdescriptors\",\n                category:\"alerta-error\"\n            }\n            dispatch({\n                type:SHOW_ERROR_TAGDESCRIPTOR,\n                payload: alert\n            })\n        }\n        \n    }\n\n    const searchTagsDescriptors = async (search)=>{\n        try {\n            dispatch({\n                type: SEARCH_TAGSDESCRIPTORS,\n                payload: search.toUpperCase()\n            })\n        } catch (error) {\n            const alert = {\n                msg:\"hubo un error buscando los tagdescriptors\",\n                category:\"alerta-error\"\n            }\n            dispatch({\n                type:SHOW_ERROR_TAGDESCRIPTOR,\n                payload: alert\n            })\n        }\n        \n    }\n\n    const getTagDescriptor = async (id)=>{\n        try {\n            \n            const res = await axiosClient.get(`/api/showtag/${id}`);\n            console.log(res)\n            dispatch({\n                type: GET_TAGDESCRIPTOR,\n                payload: res.data.tagdescriptor\n            })\n        } catch (error) {\n            const alert = {\n                msg:\"No existe el tag descriptor\",\n                category:\"alerta-error\"\n            }\n            dispatch({\n                type:SHOW_ERROR_TAGDESCRIPTOR,\n                payload: alert\n            })\n        }\n        \n    }\n\n    \n    const resetMessage = ()=>{\n        dispatch({\n            type:RESET_MESSAGE\n        })\n    }\n    const createTagDescriptor = async ptagdescriptor =>{\n\n        try {\n            \n            const res = await axiosClient.post('/api/tagsdescriptors',ptagdescriptor);\n            dispatch({\n                type: CREATE_TAGDESCRIPTOR,\n                payload: res.data\n            })\n            \n            \n        } catch (error) {\n            const alert = {\n                msg:error.response.data.msg,\n                category:\"alerta-error\"\n            }\n            dispatch({\n                type:SHOW_ERROR_TAGDESCRIPTOR,\n                payload: alert\n            })\n        }\n        \n        \n    }\n\n    const createDocument = async system =>{\n\n        try {\n            \n            const res = await axiosClient.get('/api/documents',{params:{system}});\n            dispatch({\n                type: CREATE_DOCUMENT,\n                payload: res.data\n            })\n            \n            \n        } catch (error) {\n            const alert = {\n                msg:error.response.data.msg,\n                category:\"alerta-error\"\n            }\n            dispatch({\n                type:SHOW_ERROR_TAGDESCRIPTOR,\n                payload: alert\n            })\n        }\n        \n        \n    }\n\n    const showError = () =>{\n        dispatch({\n            type: SHOW_ERROR_TAGDESCRIPTOR\n        })\n    }\n\n    const selectTagDescriptor = (id_tagdescriptor) =>{\n        dispatch({\n            type: SELECT_TAGDESCRIPTOR,\n            payload:id_tagdescriptor\n        })\n    }\n\n    const deselectTagDescriptor = (id_tagdescriptor) =>{\n        dispatch({\n            type: DESELECT_TAGDESCRIPTOR\n        })\n    }\n\n    const deleteTagDescriptor = async (idTagDescriptor) =>{\n        try {\n            await axiosClient.delete(`/api/tagsdescriptors/${idTagDescriptor}`);\n            dispatch({\n                type:DELETE_TAGDESCRIPTOR,\n                payload:idTagDescriptor\n            })\n        } catch (error) {\n            const alert = {\n                msg:\"hubo un error eliminando el tag descriptor\",\n                category:\"alerta-error\"\n            }\n            dispatch({\n                type:SHOW_ERROR_TAGDESCRIPTOR,\n                payload: alert\n            })\n        }\n        \n       \n    }\n\n    const validateTagname = async (id) =>{\n        try {\n            await axiosClient.get(`/api/showtag/${id}`);\n            const alert = {\n                msg:\"El tag descriptor para ese tagname ya existe\",\n                category:\"alerta-error\"\n            }\n            dispatch({\n                type: INVALIDATE_TAGDESCRIPTOR,\n                payload: alert\n            })\n        } catch (error) {\n            dispatch({\n                type:VALIDATE_TAGDESCRIPTOR\n            })\n        }\n    }\n\n    const updateTagDescriptor = async (tagdescriptor) =>{\n        try {\n            const id = tagdescriptor._id\n            const res = await axiosClient.put(`/api/tagsdescriptors/${id}`,tagdescriptor)\n            \n            dispatch({\n                type:UPDATE_TAGDESCRIPTOR,\n                payload:res.data.tag_descriptor_modified\n            })\n            \n\n        } catch (error) {\n            console.log(error)\n\n        }\n    }\n    const  getTagDescriptorsRelated = async (id) =>{\n        try {\n            const res = await axiosClient.get(`/api/tagsdescriptors/related/${id}`);\n            console.log(res)\n            dispatch({\n                type: GET_TAGSDESCRIPTORS_RELATED,\n                payload: res.data.tagdescriptor\n            })\n        } catch (error) {\n            const alert = {\n                msg:\"No existen descriptores relacionados\",\n                category:\"alerta-error\"\n            }\n            dispatch({\n                type:SHOW_ERROR_TAGDESCRIPTOR,\n                payload: alert\n            })\n        }\n        \n    }\n\n    return (\n        <tagDescriptorContext.Provider\n            value={{\n                tagdescriptors: state.tagdescriptors,\n                form: state.form,\n                error: state.error,\n                tagdescriptor: state.tagdescriptor,\n                message: state.message,\n                searchtagdescriptors: state.searchtagdescriptors,\n                tagname_ok:state.tagname_ok,\n                urlDoc:state.urlDoc,\n                showForm, \n                related: state.related,\n                getTagsDescriptors,\n                createTagDescriptor,\n                showError, \n                selectTagDescriptor,\n                deleteTagDescriptor,\n                getTagDescriptor,\n                deselectTagDescriptor,\n                updateTagDescriptor,\n                searchTagsDescriptors,\n                getTagDescriptorsRelated,\n                resetMessage,\n                validateTagname,\n                createDocument\n            }}\n        >\n\n            {props.children}\n        </tagDescriptorContext.Provider>\n    )\n\n}\n\nexport default TagDescriptorState;"]},"metadata":{},"sourceType":"module"}
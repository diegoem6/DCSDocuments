{"ast":null,"code":"var _jsxFileName = \"/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/src/components/system/systemForm.js\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport systemContext from '../../context/system/systemContext';\nimport assetContext from '../../context/asset/assetContext';\n\nconst SystemForm = () => {\n  const sContext = useContext(systemContext);\n  const {\n    getSystems,\n    systemSelected,\n    addSystem,\n    updateSystem\n  } = sContext;\n  const aContext = useContext(assetContext);\n  const {\n    asset\n  } = aContext;\n  const [error, setError] = useState(false);\n  const [system, setSystem] = useState({\n    name: ''\n  });\n  useEffect(() => {\n    if (systemSelected) {\n      setSystem(systemSelected);\n    } else {\n      setSystem('');\n    }\n  }, [systemSelected]);\n  if (!asset) return null;\n  const {\n    name\n  } = system;\n  const [assetActual] = asset;\n\n  const onSubmit = e => {\n    e.preventDefault();\n\n    if (name.trim() === '') {\n      setError(true);\n      return;\n    }\n\n    setError(false);\n    system.asset = assetActual._id;\n    system.active = false;\n\n    if (systemSelected) {\n      updateSystem(system);\n    } else {\n      addSystem(system);\n    }\n\n    getSystems(assetActual._id);\n    console.log(\"saliendo del getSystem\");\n    setSystem({\n      name: ''\n    });\n  };\n\n  const onChange = e => {\n    setSystem({ ...system,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"formulario\",\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contenedor-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"input-text\",\n    placeholder: \"Nombre del sistema\",\n    name: \"name\",\n    value: name,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contenedor-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    className: \"btn btn-primario btn-submit btn-block\",\n    value: systemSelected === null ? \"Agregar sistema\" : \"Guardar sistema\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 21\n    }\n  }))), error ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mensaje error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 22\n    }\n  }, \"El nombre del sistema es obligatorio\") : null);\n};\n\nexport default SystemForm;","map":{"version":3,"sources":["/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/src/components/system/systemForm.js"],"names":["React","useContext","useState","useEffect","systemContext","assetContext","SystemForm","sContext","getSystems","systemSelected","addSystem","updateSystem","aContext","asset","error","setError","system","setSystem","name","assetActual","onSubmit","e","preventDefault","trim","_id","active","console","log","onChange","target","value"],"mappings":"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","sourcesContent":["import React, {useContext, useState, useEffect} from 'react';\nimport systemContext from '../../context/system/systemContext'\nimport assetContext from '../../context/asset/assetContext'\n\n\nconst SystemForm = () => {\n\n    const sContext = useContext(systemContext)\n    const {getSystems, systemSelected, addSystem, updateSystem} = sContext\n\n    const aContext = useContext(assetContext)\n    const {asset} = aContext\n\n    const [error, setError] = useState(false)\n    const [system,setSystem] = useState({\n        name:''\n    })\n\n    useEffect(() => {\n        if (systemSelected){\n            setSystem(systemSelected)\n        }else{\n            setSystem('')\n        }\n    }, [systemSelected])\n    \n\n    if (!asset) return null;\n\n    const {name} =  system\n\n    const [assetActual] = asset\n\n    const onSubmit = (e)=>{\n        e.preventDefault();\n        if(name.trim()===''){\n            setError(true)\n            return;\n        }\n        setError(false);\n        system.asset = assetActual._id\n        system.active = false\n        if (systemSelected){\n            updateSystem(system)\n        }else{\n            addSystem(system);\n        }\n        getSystems(assetActual._id)\n        console.log(\"saliendo del getSystem\")\n        setSystem({name:''});\n        \n    }\n    const onChange = (e)=>{\n        setSystem({\n            ...system,\n            [e.target.name]:e.target.value\n        })\n    }\n\n\n    return ( \n        <div className=\"formulario\"\n            onSubmit={onSubmit}>\n            <form>\n                <div \n                    className=\"contenedor-input\">\n                    <input \n                        type=\"text\"\n                        className=\"input-text\"\n                        placeholder=\"Nombre del sistema\"\n                        name=\"name\"\n                        value={name}\n                        onChange = {onChange}\n                    />\n                </div>\n                <div \n                    className=\"contenedor-input\">\n                    <input \n                        type=\"submit\"\n                        className=\"btn btn-primario btn-submit btn-block\"\n                        value={systemSelected === null ? \"Agregar sistema\":\"Guardar sistema\"}\n                    />\n                </div>\n\n            </form>\n            {error ? <p className=\"mensaje error\">El nombre del sistema es obligatorio</p> : null}\n        </div>\n     );\n}\n \nexport default SystemForm;"]},"metadata":{},"sourceType":"module"}
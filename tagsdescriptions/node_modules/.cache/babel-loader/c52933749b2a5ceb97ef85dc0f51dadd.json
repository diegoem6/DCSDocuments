{"ast":null,"code":"import _regeneratorRuntime from\"/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useReducer}from'react';import assetContext from'./assetContext';import assetReducer from'./assetReducer';import{FORM_ASSETS,GET_ASSETS,ADD_ASSET,SHOW_ERROR_ASSET,VALIDATE_ASSET,SELECT_ASSET,DELETE_ASSET,GET_ASSETS_TREE,RESET_MESSAGE}from'../../types/index';import axiosClient from'../../config/axios';var AssetState=function AssetState(props){var initialState={assets:[],form:false,error:false,asset:null,message:null,assetsTree:[{}]};//Dispatch para ejecutar las acciones\nvar _useReducer=useReducer(assetReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];//defino las funciones para el CRUD de formularios\nvar showForm=function showForm(){dispatch({type:FORM_ASSETS});};var getAssets=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,alert;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axiosClient.get('/api/assets');case 3:res=_context.sent;dispatch({type:GET_ASSETS,payload:res.data.assets});_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);alert={msg:_context.t0.response.data.msg,category:\"alerta-error\"};dispatch({type:SHOW_ERROR_ASSET,payload:alert});case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getAssets(){return _ref.apply(this,arguments);};}();var addAsset=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(asset){var res,alert;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axiosClient.post('/api/assets',asset);case 3:res=_context2.sent;console.log(res.data);dispatch({type:ADD_ASSET,payload:res.data});_context2.next=12;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);alert={msg:_context2.t0.response.data.msg,category:\"alerta-error\"};dispatch({type:SHOW_ERROR_ASSET,payload:alert});case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function addAsset(_x){return _ref2.apply(this,arguments);};}();var showError=function showError(){dispatch({type:VALIDATE_ASSET});};var selectAsset=function selectAsset(asset){dispatch({type:SELECT_ASSET,payload:asset});};var resetMessage=function resetMessage(){dispatch({type:RESET_MESSAGE});};var deleteAsset=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(asset){var idAsset,alert;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;idAsset=asset._id;_context3.next=4;return axiosClient.delete(\"/api/assets/\".concat(idAsset));case 4:dispatch({type:DELETE_ASSET,payload:idAsset});_context3.next=11;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);alert={msg:_context3.t0.response.data.msg,category:\"alerta-error\"};dispatch({type:SHOW_ERROR_ASSET,payload:alert});case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function deleteAsset(_x2){return _ref3.apply(this,arguments);};}();var getAssetTree=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var res,assetsTree_temp,j,i,alert;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axiosClient.get('api/tree');case 3:res=_context4.sent;assetsTree_temp=res.data.assets;j=0;i=0;assetsTree_temp.forEach(function(i_asset){assetsTree_temp[j].key=i_asset._id;assetsTree_temp[j].label=i_asset.name;assetsTree_temp[j].nodes=i_asset.nodes;i=0;assetsTree_temp[j].nodes.forEach(function(i_system){assetsTree_temp[j].nodes[i].key=i_system._id;assetsTree_temp[j].nodes[i].label=i_system.name;i=i+1;});j=j+1;});dispatch({type:GET_ASSETS_TREE,payload:assetsTree_temp});_context4.next=15;break;case 11:_context4.prev=11;_context4.t0=_context4[\"catch\"](0);alert={msg:_context4.t0.response.data.msg,category:\"alerta-error\"};dispatch({type:SHOW_ERROR_ASSET,payload:alert});case 15:case\"end\":return _context4.stop();}}},_callee4,null,[[0,11]]);}));return function getAssetTree(){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(assetContext.Provider,{value:{assets:state.assets,form:state.form,error:state.error,asset:state.asset,message:state.message,assetsTree:state.assetsTree,showForm:showForm,getAssets:getAssets,addAsset:addAsset,showError:showError,selectAsset:selectAsset,deleteAsset:deleteAsset,getAssetTree:getAssetTree,resetMessage:resetMessage}},props.children);};export default AssetState;","map":{"version":3,"sources":["/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/src/context/asset/assetState.js"],"names":["React","useReducer","assetContext","assetReducer","FORM_ASSETS","GET_ASSETS","ADD_ASSET","SHOW_ERROR_ASSET","VALIDATE_ASSET","SELECT_ASSET","DELETE_ASSET","GET_ASSETS_TREE","RESET_MESSAGE","axiosClient","AssetState","props","initialState","assets","form","error","asset","message","assetsTree","state","dispatch","showForm","type","getAssets","get","res","payload","data","alert","msg","response","category","addAsset","post","console","log","showError","selectAsset","resetMessage","deleteAsset","idAsset","_id","delete","getAssetTree","assetsTree_temp","j","i","forEach","i_asset","key","label","name","nodes","i_system","children"],"mappings":"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","sourcesContent":["import React, {useReducer} from 'react';\nimport assetContext from './assetContext'\nimport assetReducer from './assetReducer'\nimport {\n    FORM_ASSETS,      \n    GET_ASSETS,       \n    ADD_ASSET,       \n    SHOW_ERROR_ASSET,\n    VALIDATE_ASSET,  \n    SELECT_ASSET,    \n    DELETE_ASSET,\n    GET_ASSETS_TREE,\n    RESET_MESSAGE   } from '../../types/index'\nimport axiosClient from '../../config/axios'\n\n\nconst AssetState = props=>{\n    \n    \n    const initialState={\n        assets : [],\n        form:false,\n        error: false, \n        asset: null,\n        message:null, \n        assetsTree: [{}]\n    }\n\n    //Dispatch para ejecutar las acciones\n    const [state,dispatch] = useReducer(assetReducer, initialState)\n\n\n    //defino las funciones para el CRUD de formularios\n    const showForm =()=>{\n        dispatch({\n            type: FORM_ASSETS\n        })\n    }\n\n    const getAssets = async ()=>{\n        try {\n            const res = await axiosClient.get('/api/assets');\n            dispatch({\n                type: GET_ASSETS,\n                payload: res.data.assets\n            })\n        } catch (error) {\n            const alert = {\n                msg:error.response.data.msg,\n                category:\"alerta-error\"\n            }\n            dispatch({\n                type:SHOW_ERROR_ASSET,\n                payload: alert\n            })\n        }\n        \n    }\n\n    const addAsset = async asset =>{\n\n        try {\n            const res = await axiosClient.post('/api/assets',asset);\n            console.log(res.data)\n            dispatch({\n                type: ADD_ASSET,\n                payload: res.data\n            })\n        } catch (error) {\n            const alert = {\n                msg:error.response.data.msg,\n                category:\"alerta-error\"\n            }\n            dispatch({\n                type:SHOW_ERROR_ASSET,\n                payload: alert\n            })\n        }\n        \n        \n    }\n\n    const showError = () =>{\n        dispatch({\n            type: VALIDATE_ASSET\n        })\n    }\n\n    const selectAsset= (asset) =>{\n        dispatch({\n            type: SELECT_ASSET,\n            payload:asset\n        })\n    }\n    const resetMessage = () =>{\n        dispatch({\n            type: RESET_MESSAGE\n        })\n    }\n\n    const deleteAsset = async (asset) =>{\n        try {\n            const idAsset = asset._id\n            \n            await axiosClient.delete(`/api/assets/${idAsset}`);\n            dispatch({\n                type:DELETE_ASSET,\n                payload:idAsset\n            })\n        } catch (error) {\n            const alert = {\n                msg:error.response.data.msg,\n                category:\"alerta-error\"\n            }\n            dispatch({\n                type:SHOW_ERROR_ASSET,\n                payload: alert\n            })\n        }\n        \n       \n    }\n\n    const getAssetTree = async ()=>{\n        try {\n            const res = await axiosClient.get('api/tree')\n            \n            let assetsTree_temp = res.data.assets\n            let j = 0\n            let i = 0\n            assetsTree_temp.forEach(i_asset => {\n                assetsTree_temp[j].key = i_asset._id\n                assetsTree_temp[j].label = i_asset.name\n                assetsTree_temp[j].nodes = i_asset.nodes\n                i=0;\n                assetsTree_temp[j].nodes.forEach(i_system => {\n                    assetsTree_temp[j].nodes[i].key = i_system._id\n                    assetsTree_temp[j].nodes[i].label = i_system.name\n                    i = i+1;\n                })\n                j= j+1;\n            });\n            dispatch({\n                type: GET_ASSETS_TREE,\n                payload: assetsTree_temp\n            })\n\n\n        } catch (error) {\n            const alert = {\n                msg:error.response.data.msg,\n                category:\"alerta-error\"\n            }\n            dispatch({\n                type:SHOW_ERROR_ASSET,\n                payload: alert\n            })\n        }\n    }\n\n    return (\n        <assetContext.Provider\n            value={{\n                assets: state.assets,\n                form: state.form,\n                error: state.error,\n                asset: state.asset,\n                message: state.message,\n                assetsTree: state.assetsTree,\n                showForm, \n                getAssets,\n                addAsset,\n                showError, \n                selectAsset,\n                deleteAsset,\n                getAssetTree,\n                resetMessage\n            }}\n        >\n            {props.children}\n        </assetContext.Provider>\n    )\n\n}\n\nexport default AssetState;"]},"metadata":{},"sourceType":"module"}
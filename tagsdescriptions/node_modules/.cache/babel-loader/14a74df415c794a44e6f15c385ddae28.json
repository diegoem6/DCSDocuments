{"ast":null,"code":"var _jsxFileName = \"/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/src/components/system/systemForm.js\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport systemContext from '../../context/system/systemContext';\nimport assetContext from '../../context/asset/assetContext';\nimport alertContext from '../../context/alerts/alertContext.js';\n\nconst SystemForm = () => {\n  const sContext = useContext(systemContext);\n  const {\n    systemSelected,\n    message,\n    addSystem,\n    updateSystem,\n    resetMessage\n  } = sContext;\n  const aContext = useContext(assetContext);\n  const {\n    asset\n  } = aContext;\n  const alContext = useContext(alertContext);\n  const {\n    showAlert\n  } = alContext;\n  const [error, setError] = useState(false);\n  const [system, setSystem] = useState({\n    name: ''\n  });\n  useEffect(() => {\n    if (message) {\n      showAlert(message.msg, message.category);\n      resetMessage();\n    }\n  }, [message]);\n  useEffect(() => {\n    if (systemSelected) {\n      setSystem(systemSelected);\n    } else {\n      setSystem('');\n    }\n  }, [systemSelected]);\n  if (!asset) return null;\n  const {\n    name\n  } = system;\n  const [assetActual] = asset;\n\n  const onSubmit = e => {\n    e.preventDefault();\n\n    if (!name) {\n      setError(true);\n      return;\n    }\n\n    setError(false);\n    system.asset = assetActual._id;\n    system.active = false;\n\n    if (systemSelected) {\n      updateSystem(system);\n    } else {\n      addSystem(system);\n    }\n\n    setSystem({\n      name: ''\n    });\n  };\n\n  const onChange = e => {\n    setSystem({ ...system,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"formulario\",\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contenedor-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"input-text\",\n    placeholder: \"Nombre del sistema\",\n    name: \"name\",\n    value: name,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contenedor-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"submit\",\n    className: \"btn btn-primario btn-submit btn-block\",\n    value: systemSelected === null ? \"Agregar sistema\" : \"Guardar sistema\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }))), error ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mensaje error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 22\n    }\n  }, \"El nombre del sistema es obligatorio\") : null);\n};\n\nexport default SystemForm;","map":{"version":3,"sources":["/Users/diegoricca/Documents/React/DCSDocuments/tagsdescriptions/src/components/system/systemForm.js"],"names":["React","useContext","useState","useEffect","systemContext","assetContext","alertContext","SystemForm","sContext","systemSelected","message","addSystem","updateSystem","resetMessage","aContext","asset","alContext","showAlert","error","setError","system","setSystem","name","msg","category","assetActual","onSubmit","e","preventDefault","_id","active","onChange","target","value"],"mappings":"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","sourcesContent":["import React, {useContext, useState, useEffect} from 'react';\nimport systemContext from '../../context/system/systemContext'\nimport assetContext from '../../context/asset/assetContext'\nimport alertContext from '../../context/alerts/alertContext.js'\n\n\nconst SystemForm = () => {\n\n    const sContext = useContext(systemContext)\n    const {systemSelected, message, addSystem, updateSystem, resetMessage} = sContext\n\n    const aContext = useContext(assetContext)\n    const {asset} = aContext\n\n    const alContext = useContext(alertContext)\n    const {showAlert} = alContext\n\n    const [error, setError] = useState(false)\n    const [system,setSystem] = useState({\n        name:''\n    })\n\n    useEffect(() => {\n        if(message){\n            showAlert(message.msg, message.category)\n            resetMessage();\n        }\n    }, [message])\n    \n    useEffect(() => {\n        if (systemSelected){\n            setSystem(systemSelected)\n        }else{\n            setSystem('')\n        }\n    }, [systemSelected])\n\n    if (!asset) return null;\n\n    const {name} =  system\n\n    const [assetActual] = asset\n\n    const onSubmit = (e)=>{\n        e.preventDefault();\n        if(!name){\n            setError(true)\n            return;\n        }\n        setError(false);\n        system.asset = assetActual._id\n        system.active = false\n        if (systemSelected){\n            updateSystem(system)\n        }else{\n            addSystem(system);\n        }\n        \n        setSystem({name:''});\n        \n    }\n    const onChange = (e)=>{\n        setSystem({\n            ...system,\n            [e.target.name]:e.target.value\n        })\n    }\n\n\n    return ( \n        <div className=\"formulario\"\n            onSubmit={onSubmit}>\n            <form>\n                <div \n                    className=\"contenedor-input\">\n                    <input \n                        type=\"text\"\n                        className=\"input-text\"\n                        placeholder=\"Nombre del sistema\"\n                        name=\"name\"\n                        value={name}\n                        onChange = {onChange}\n                    />\n                </div>\n                <div \n                    className=\"contenedor-input\">\n                    <input \n                        type=\"submit\"\n                        className=\"btn btn-primario btn-submit btn-block\"\n                        value={systemSelected === null ? \"Agregar sistema\":\"Guardar sistema\"}\n                    />\n                </div>\n\n            </form>\n            {error ? <p className=\"mensaje error\">El nombre del sistema es obligatorio</p> : null}\n        </div>\n     );\n}\n \nexport default SystemForm;"]},"metadata":{},"sourceType":"module"}
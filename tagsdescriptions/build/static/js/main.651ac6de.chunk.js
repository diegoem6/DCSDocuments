(this.webpackJsonptagsdescriptions=this.webpackJsonptagsdescriptions||[]).push([[0],{47:function(e,t,a){e.exports=a(81)},80:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(15),c=a.n(s),o=a(8),l=a(14),u=a(13),i=a(2),m=a(4),p=Object(r.createContext)(),d=Object(r.createContext)(),E=function(e){var t=Object(r.useState)({email:"",password:""}),a=Object(m.a)(t,2),s=a[0],c=a[1],l=s.email,E=s.password,b=function(e){c(Object(i.a)({},s,Object(u.a)({},e.target.name,e.target.value)))},f=Object(r.useContext)(d),g=f.alert,y=f.showAlert,O=Object(r.useContext)(p),S=O.loginUser,v=O.authenticated,h=O.message,T=O.resetMessage;Object(r.useEffect)((function(){h&&(y(h.msg,h.category),T())}),[h]),Object(r.useEffect)((function(){v&&e.history.push("/menu")}),[v,e.history]);return n.a.createElement("div",{className:"form-usuario"},g?n.a.createElement("div",{className:"alerta ".concat(g.category)},g.msg," "):null,n.a.createElement("div",{className:"contenedor-form sombra-dark"},n.a.createElement("h1",null,"Iniciar Sesi\xf3n"),n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==l.trim()&&""!==E.trim()?S({email:l,password:E}):y("Todos los campos son obligatorios","alerta-error")}},n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"Email",onChange:b,value:l})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Password",onChange:b,value:E})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Iniciar Sesi\xf3n"}))),n.a.createElement(o.b,{to:"/newuser",className:"enlace-cuenta"},"> Obtener cuenta")))},b=function(e){var t=Object(r.useState)({name:"",email:"",password:"",rpassword:""}),a=Object(m.a)(t,2),s=a[0],c=a[1],l=Object(r.useContext)(d),E=l.alert,b=l.showAlert,f=Object(r.useContext)(p),g=f.authenticated,y=f.message,O=f.createUser,S=f.resetMessage,v=s.name,h=s.email,T=s.password,R=s.rpassword;Object(r.useEffect)((function(){g&&e.history.push("/"),y&&(b(y.msg,y.category),S())}),[g,y,e.history]);var j=function(e){c(Object(i.a)({},s,Object(u.a)({},e.target.name,e.target.value)))};return n.a.createElement("div",{className:"form-usuario"},E?n.a.createElement("div",{className:"alerta ".concat(E.category)},E.msg," "):null,n.a.createElement("div",{className:"contenedor-form sombra-dark"},n.a.createElement("h1",null,"Nueva cuenta"),n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==v.trim()&&""!==h.trim()&&""!==T.trim()&&""!==R.trim()?T.length<6?b("El password debe tener al menos 6 caracteres","alerta-error"):T===R?O({name:v,email:h,password:T}):b("Los passwords deben ser iguales","alerta-error"):b("Todos los campos son obligatorios","alerta-error")}},n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"nombre"},"Nombre"),n.a.createElement("input",{type:"text",id:"name",name:"name",placeholder:"Nombre",onChange:j,value:v})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"Email",onChange:j,value:h})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Password",onChange:j,value:T})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"confirmar"},"Confirmar password"),n.a.createElement("input",{type:"password",id:"rpassword",name:"rpassword",placeholder:"Repeti tu password",onChange:j,value:R})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Registrar cuenta"}))),n.a.createElement(o.b,{to:"/",className:"enlace-cuenta"},"> Volver a Login")))},f=function(){var e=Object(r.useContext)(p),t=e.user,a=e.getUser,s=e.logOff;return Object(r.useEffect)((function(){a()}),[]),n.a.createElement("header",{className:"app-header"},t?n.a.createElement("p",{className:"nombre-usuario"},"Hola ",n.a.createElement("span",null,t.name)):null,n.a.createElement("nav",{className:"nav-principal"},n.a.createElement("button",{className:"btn btn-blank cerrar-sesion",onClick:s},"Cerrar Sesi\xf3n")))},g=Object(r.createContext)(),y=Object(r.createContext)(),O=(a(56),a(57),a(43)),S=function(){var e=Object(r.useContext)(g),t=e.tagname_ok,a=e.message,s=e.createTagDescriptor,c=e.tagdescriptor,o=e.resetMessage,l=e.updateTagDescriptor,u=e.validateTagname,i=Object(r.useContext)(y).systemSelected,p=Object(r.useContext)(d).showAlert,E=Object(r.useState)(""),b=Object(m.a)(E,2),f=b[0],S=b[1],v=Object(r.useState)(""),h=Object(m.a)(v,2),T=h[0],R=h[1],j=Object(r.useState)(""),_=Object(m.a)(j,2),C=_[0],A=_[1];if(Object(r.useEffect)((function(){if(null!==c&&c.length>0){var e=Object(m.a)(c,1)[0];S(e.tagname),R(e.description)}else S(""),R("")}),[]),Object(r.useEffect)((function(){a&&(p(a.msg,a.category),console.log(a.category),"alerta-error"===a.category?A("-red"):A(""),o())}),[a]),!i)return null;return n.a.createElement(r.Fragment,null,n.a.createElement("h2",null,"Nuevo tags descriptor en el sistema: ",i.name),n.a.createElement("form",{className:"formulario-nuevo-proyecto",onSubmit:function(e){if(e.preventDefault(),""!==f.trim()&&""!==T.trim()){var r={};if(r.tagname=f,r.description=T,r.system=i._id,null!==c&&c.length>0){var n=Object(m.a)(c,1)[0];r._id=n._id,l(r)}else{if(!1===t)return void(a?(p(a.msg,a.category),o()):p("El tag descriptor para ese tagname ya existe","alerta-error"));s(r)}}else p("Debe completar tagname y descripci\xf3n","alerta-error")}},n.a.createElement("input",{type:"text",className:"input-text".concat(C),placeholder:"Tag name",name:"tagname",value:f,onChange:function(e){S(e.target.value)},readOnly:null!==c&&c.length>0,onBlur:function(e){null!==c&&c.length>0||u(e.target.value),A("")}}),n.a.createElement(O.a,{initialValue:T,init:{height:500,menubar:"file edit view insert format tools table help",plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | bold italic underline strikethrough | fontselect fontsizeselect formatselect | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | forecolor backcolor removeformat | pagebreak | charmap emoticons | fullscreen  preview save print | insertfile image media template link anchor codesample | ltr rtl",toolbar_sticky:!0,paste_retain_style_properties:"all"},onEditorChange:function(e){R(e)}}),null!==c&&c.length>0?n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Guardar Tag"}):n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Agregar Tag"})))},v=a(17),h=function(e){var t=e.tagdescriptor,a=Object(r.useContext)(g),s=a.deleteTagDescriptor,c=a.selectTagDescriptor,o=a.showForm;return n.a.createElement("li",{className:"tarea sombra"},n.a.createElement("p",null,t.tagname," "),n.a.createElement("div",{className:"acciones"},n.a.createElement("a",{target:"_blank",href:"".concat("http://192.168.1.4:3001","/showTagDescriptor/").concat(t.tagname),className:"btn btn-primario"},"Ver"),n.a.createElement("button",{type:"button",className:"btn btn-primario",onClick:function(){!function(e){c(e._id),o()}(t)}},"Editar "),n.a.createElement("button",{type:"button",className:"btn btn-secundario",onClick:function(){Object(v.confirmAlert)({title:"Confirmar",message:"\xbfEst\xe1s seguro de eliminar el descriptor?",buttons:[{label:"Yes",onClick:function(){s(t._id)}},{label:"No",onClick:function(){return console.log("no")}}]})}},"Eliminar")))},T=a(40),R=a.n(T),j=function(){var e=Object(r.useContext)(y).systemSelected,t=Object(r.useContext)(g),a=t.searchtagdescriptors,s=t.getTagsDescriptors,c=Object(r.useState)({offset:0,perPage:10,currentPage:0,pageCount:0,data:[]}),o=Object(m.a)(c,2),l=o[0],u=o[1];if(Object(r.useEffect)((function(){e&&s(e._id)}),[e]),Object(r.useEffect)((function(){e&&u(Object(i.a)({},l,{pageCount:Math.ceil(a.length/l.perPage),data:a,offset:0,currentPage:0}))}),[a]),!e)return n.a.createElement("h2",null,"Seleccione un sistema");if(!a)return n.a.createElement("p",null,"No hay documentos para el sistema seleccionado");return n.a.createElement(r.Fragment,null,n.a.createElement("h2",null,"Tags descriptors del sistema: ",e.name),n.a.createElement("ul",null,0===a.length?n.a.createElement("li",{className:"tarea"},n.a.createElement("p",null,"No hay documentos para el sistema seleccionado")):l.data.slice(l.offset,l.offset+l.perPage).map((function(e){return n.a.createElement(h,{tagdescriptor:e})}))),n.a.createElement("div",null,n.a.createElement(R.a,{previousLabel:"<",nextLabel:">",breakLabel:"...",breakClassName:"break-me",pageCount:l.pageCount,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:function(e){var t=e.selected,a=t*l.perPage;u(Object(i.a)({},l,{currentPage:t,offset:a}))},containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"})))},_=function(){var e=Object(r.useContext)(g),t=e.showForm,a=e.searchTagsDescriptors,s=Object(r.useContext)(y).systemSelected,c=Object(r.useState)(""),o=Object(m.a)(c,2),l=o[0],u=o[1];if(Object(r.useEffect)((function(){u("")}),[s]),!s)return null;return n.a.createElement("div",{className:"formulario"},n.a.createElement("div",{className:"contenedor-input"},n.a.createElement("input",{type:"text",className:"input-text",placeholder:"buscar tag descriptor",name:"search",value:l,onChange:function(e){u(e.target.value),a(e.target.value)}})),n.a.createElement("div",{className:"contenedor-input"},n.a.createElement("button",{type:"button",className:"btn btn-secundario btn-submit btn-block",onClick:function(){t()}},"Nuevo tag descriptor")))},C=Object(r.createContext)(),A=a(41),x=function(){var e=Object(r.useContext)(C),t=e.assetsTree,a=e.getAssetTree,s=Object(r.useContext)(g).deselectTagDescriptor,c=Object(r.useContext)(y),l=c.selectSystem,u=c.deselectSystem;Object(r.useEffect)((function(){a()}),[]);return n.a.createElement("aside",null,n.a.createElement("h1",null,"Descriptores",n.a.createElement("span",null,"DCS")),n.a.createElement("div",{className:"proyectos"},n.a.createElement("h2",null,"Assets"),n.a.createElement(A.a,{data:t,selected:!1,debounceTime:125,disableKeyboard:!0,hasSearch:!1,onClickItem:function(e){var t=e._id,a=e.level,r=e.label;if(1===a){var n={};n._id=t,n.name=r,n.active=!0,function(e){l(e),s()}(n)}else u()},resetOpenNodesOnDataUpdate:!1})),n.a.createElement("div",{className:"link-menu-div"},n.a.createElement(o.b,{to:"/menu",className:"link-menu"},"< Menu")))},k=function(){var e=Object(r.useContext)(p).getUser,t=Object(r.useContext)(g).form,a=Object(r.useContext)(y).deselectSystem,s=Object(r.useContext)(d).alert;return Object(r.useEffect)((function(){e(),a()}),[]),n.a.createElement("div",{className:"contenedor-app"},s?n.a.createElement("div",{className:"alerta ".concat(s.category)},s.msg," "):null,n.a.createElement(x,null),n.a.createElement("div",{className:"seccion-principal"},n.a.createElement(f,null),n.a.createElement("main",null,n.a.createElement(_,null),n.a.createElement("div",{className:"contenedor-tareas"},t?n.a.createElement(S,null):n.a.createElement(j,null)))))},N=function(e,t){switch(t.type){case"SHOW_ALERT":return{alert:t.payload};case"HIDE_ALERT":return{alert:null};default:return e}},w=function(e){var t=Object(r.useReducer)(N,{alert:null}),a=Object(m.a)(t,2),s=a[0],c=a[1];return n.a.createElement(d.Provider,{value:{alert:s.alert,showAlert:function(e,t){c({type:"SHOW_ALERT",payload:{msg:e,category:t}}),setTimeout((function(){c({type:"HIDE_ALERT"})}),5e3)}}},e.children)},D=a(3),G=a.n(D),I=a(6),P=function(e,t){switch(t.type){case"LOGIN_SUCCESS":case"CREATE_USER_SUCCESS":return localStorage.setItem("token",t.payload.token),Object(i.a)({},e,{authenticated:!0,message:null,loading:!1});case"GET_USER":return Object(i.a)({},e,{authenticated:!0,user:t.payload,loading:!1});case"LOG_OFF":case"LOGIN_ERROR":case"CREATE_USER_ERROR":return localStorage.removeItem("token"),Object(i.a)({},e,{token:null,user:null,authenticated:!1,message:t.payload,loading:!1});case"RESET_MESSAGE":return Object(i.a)({},e,{message:null});default:return e}},L=a(42),M=a.n(L).a.create({baseURL:"http://192.168.1.4:4000"}),U=function(e){e?M.defaults.headers.common["x-auth-token"]=e:delete M.defaults.headers.common["x-auth-token"]},F=function(e){var t={token:localStorage.getItem("token"),authenticated:null,user:null,message:null,loading:!0},a=Object(r.useReducer)(P,t),s=Object(m.a)(a,2),c=s[0],o=s[1],l=function(){var e=Object(I.a)(G.a.mark((function e(t){var a,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.post("api/users",t);case 3:a=e.sent,o({type:"CREATE_USER_SUCCESS",payload:a.data}),u(),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),r={msg:e.t0.response.data.msg,category:"alerta-error"},o({type:"CREATE_USER_ERROR",payload:r});case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(I.a)(G.a.mark((function e(){var t,a;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=localStorage.getItem("token"))&&U(t),e.prev=2,e.next=5,M.get("/api/auth");case 5:a=e.sent,o({type:"GET_USER",payload:a.data.user}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o({type:"LOGIN_ERROR"});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(I.a)(G.a.mark((function e(t){var a,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.post("/api/auth",t);case 3:a=e.sent,o({type:"LOGIN_SUCCESS",payload:a.data}),u(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),r={msg:e.t0.response.data.msg,category:"alerta-error"},o({type:"LOGIN_ERROR",payload:r});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(p.Provider,{value:{token:c.token,authenticated:c.authenticated,user:c.user,message:c.message,loading:c.loading,createUser:l,loginUser:i,getUser:u,logOff:function(){o({type:"LOG_OFF"})},resetMessage:function(){o({type:"RESET_MESSAGE"})}}},e.children)},H=a(18),W=function(e,t){switch(t.type){case"FORM_ASSETS":return Object(i.a)({},e,{form:!0,error:!1,message:null});case"GET_ASSETS":return Object(i.a)({},e,{assets:t.payload,message:null});case"GET_ASSETS_TREE":return Object(i.a)({},e,{assetsTree:t.payload,message:null});case"ADD_ASSET":return Object(i.a)({},e,{assets:[].concat(Object(H.a)(e.assets),[t.payload]),form:!1,error:!1,message:null});case"RESET_MESSAGE":return Object(i.a)({},e,{message:null});case"VALIDATE_ASSET":return Object(i.a)({},e,{error:!0,message:null});case"SELECT_ASSET":return Object(i.a)({},e,{asset:e.assets.filter((function(e){return e._id===t.payload._id})),message:null});case"DELETE_ASSET":return Object(i.a)({},e,{assets:e.assets.filter((function(e){return e._id!==t.payload})),asset:null,message:null});case"SHOW_ERROR_ASSET":return Object(i.a)({},e,{message:t.payload});default:return e}},Y=function(e){var t=Object(r.useReducer)(W,{assets:[],form:!1,error:!1,asset:null,message:null,assetsTree:[{}]}),a=Object(m.a)(t,2),s=a[0],c=a[1],o=function(){var e=Object(I.a)(G.a.mark((function e(){var t,a;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.get("/api/assets");case 3:t=e.sent,c({type:"GET_ASSETS",payload:t.data.assets}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a={msg:e.t0.response.data.msg,category:"alerta-error"},c({type:"SHOW_ERROR_ASSET",payload:a});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(I.a)(G.a.mark((function e(t){var a,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.post("/api/assets",t);case 3:a=e.sent,console.log(a.data),c({type:"ADD_ASSET",payload:a.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),r={msg:e.t0.response.data.msg,category:"alerta-error"},c({type:"SHOW_ERROR_ASSET",payload:r});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(I.a)(G.a.mark((function e(t){var a,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t._id,e.next=4,M.delete("/api/assets/".concat(a));case 4:c({type:"DELETE_ASSET",payload:a}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),r={msg:e.t0.response.data.msg,category:"alerta-error"},c({type:"SHOW_ERROR_ASSET",payload:r});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(I.a)(G.a.mark((function e(){var t,a,r,n,s;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.get("api/tree");case 3:t=e.sent,a=t.data.assets,r=0,n=0,a.forEach((function(e){a[r].key=e._id,a[r].label=e.name,a[r].nodes=e.nodes,n=0,a[r].nodes.forEach((function(e){a[r].nodes[n].key=e._id,a[r].nodes[n].label=e.name,n+=1})),r+=1})),c({type:"GET_ASSETS_TREE",payload:a}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),s={msg:e.t0.response.data.msg,category:"alerta-error"},c({type:"SHOW_ERROR_ASSET",payload:s});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return n.a.createElement(C.Provider,{value:{assets:s.assets,form:s.form,error:s.error,asset:s.asset,message:s.message,assetsTree:s.assetsTree,showForm:function(){c({type:"FORM_ASSETS"})},getAssets:o,addAsset:l,showError:function(){c({type:"VALIDATE_ASSET"})},selectAsset:function(e){c({type:"SELECT_ASSET",payload:e})},deleteAsset:u,getAssetTree:i,resetMessage:function(){c({type:"RESET_MESSAGE"})}}},e.children)},V=function(e,t){switch(t.type){case"ADD_SYSTEM":return Object(i.a)({},e,{systems:[].concat(Object(H.a)(e.systems),[t.payload]),message:null});case"GET_SYSTEMS":return Object(i.a)({},e,{systems:t.payload,systemSelected:null,message:null});case"UPDATE_SYSTEM":return Object(i.a)({},e,{systemSelected:null,message:null});case"SELECT_SYSTEM":return Object(i.a)({},e,{systemSelected:t.payload,message:null});case"DESELECT_SYSTEM":return Object(i.a)({},e,{systemSelected:null,message:null});case"DELETE_SYSTEM":return Object(i.a)({},e,{systems:e.systems.filter((function(e){return e._id!==t.payload._id})),message:null,systemSelected:null});case"SHOW_ERROR":return Object(i.a)({},e,{message:t.payload});case"RESET_MESSAGE":return Object(i.a)({},e,{message:null});default:return e}},B=function(e){var t=Object(r.useReducer)(V,{systems:[],systemSelected:null,message:null,active:!1}),a=Object(m.a)(t,2),s=a[0],c=a[1],o=function(){var e=Object(I.a)(G.a.mark((function e(t){var a,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.post("/api/systems",t);case 3:a=e.sent,c({type:"ADD_SYSTEM",payload:a.data}),l(t.asset),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),r={msg:e.t0.response.data.msg,category:"alerta-error"},c({type:"SHOW_ERROR",payload:r});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(I.a)(G.a.mark((function e(t){var a,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.get("/api/systems",{params:{asset:t}});case 3:a=e.sent,c({type:"GET_SYSTEMS",payload:a.data.systems}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),r={msg:e.t0.response.data.msg,category:"alerta-error"},c({type:"SHOW_ERROR",payload:r});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(I.a)(G.a.mark((function e(t){var a,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t._id,e.next=4,M.put("/api/systems/".concat(a),t);case 4:c({type:"UPDATE_SYSTEM"}),l(t.asset),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),r={msg:e.t0.response.data.msg,category:"alerta-error"},c({type:"SHOW_ERROR",payload:r});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(I.a)(G.a.mark((function e(t){var a,r,n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t._id,r=t.asset,e.next=5,M.delete("/api/systems/".concat(a),{params:{idAsset:r}});case 5:c({type:"DELETE_SYSTEM",payload:t}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),n={msg:e.t0.response.data.msg,category:"alerta-error"},c({type:"SHOW_ERROR",payload:n});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(y.Provider,{value:{systems:s.systems,systemSelected:s.systemSelected,active:s.active,message:s.message,getSystems:l,updateSystem:u,addSystem:o,selectSystem:function(e){c({type:"SELECT_SYSTEM",payload:e})},deleteSystem:i,deselectSystem:function(){c({type:"DESELECT_SYSTEM"})},resetMessage:function(){c({type:"RESET_MESSAGE"})}}},e.children)},z=function(){return n.a.createElement(r.Fragment,null,n.a.createElement(f,null),n.a.createElement("div",{className:"form-menu"},n.a.createElement("div",{className:"contenedor-form sombra-dark"},n.a.createElement("div",{className:"campo-form"},n.a.createElement(o.b,{to:"/assets",className:"btn btn-block btn-primario"},"Estructura MdP")),n.a.createElement("div",{className:"campo-form"},n.a.createElement(o.b,{to:"/tagsdescriptors",className:"btn btn-block btn-primario"},"Descriptores DCS")))))},J=function(e,t){switch(t.type){case"FORM_TAGDESCRIPTOR":return Object(i.a)({},e,{form:!e.form,error:!1});case"GET_TAGDESCRIPTOR":return Object(i.a)({},e,{tagdescriptor:t.payload,error:!1});case"GET_TAGSDESCRIPTORS":return Object(i.a)({},e,{searchtagdescriptors:t.payload,tagdescriptors:t.payload,error:!1});case"CREATE_TAGDESCRIPTOR":return Object(i.a)({},e,{tagdescriptors:[].concat(Object(H.a)(e.tagdescriptors),[t.payload]),form:!1,error:!1});case"RESET_MESSAGE":return Object(i.a)({},e,{message:null});case"SELECT_TAGDESCRIPTOR":return Object(i.a)({},e,{tagdescriptor:e.tagdescriptors.filter((function(e){return e._id===t.payload})),error:!1});case"VALIDATE_TAGDESCRIPTOR":return Object(i.a)({},e,{tagname_ok:!0});case"INVALIDATE_TAGDESCRIPTOR":return Object(i.a)({},e,{message:t.payload,tagname_ok:!1});case"DELETE_TAGDESCRIPTOR":return Object(i.a)({},e,{tagdescriptors:e.tagdescriptors.filter((function(e){return e._id!==t.payload})),searchtagdescriptors:e.searchtagdescriptors.filter((function(e){return e._id!==t.payload})),tagdescriptor:null,error:!1});case"SHOW_ERROR_TAGDESCRIPTOR":return Object(i.a)({},e,{message:t.payload,error:!0});case"DESELECT_TAGDESCRIPTOR":case"UPDATE_TAGDESCRIPTOR":return Object(i.a)({},e,{form:!1,tagdescriptor:null,error:!1});case"SEARCH_TAGSDESCRIPTORS":return Object(i.a)({},e,{searchtagdescriptors:e.tagdescriptors.filter((function(e){return e.tagname.indexOf(t.payload)>-1})),tagdescriptor:null,form:!1,error:!1});default:return e}},K=function(e){var t=Object(r.useReducer)(J,{tagdescriptors:[],searchtagdescriptors:[],form:!1,tagname_ok:!0,tagdescriptor:null,message:null}),a=Object(m.a)(t,2),s=a[0],c=a[1],o=function(){var e=Object(I.a)(G.a.mark((function e(t){var a;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.get("/api/tagsdescriptors",{params:{system:t}});case 3:a=e.sent,c({type:"GET_TAGSDESCRIPTORS",payload:a.data.tagsdescriptors}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),c({type:"SHOW_ERROR_TAGDESCRIPTOR",payload:{msg:"hubo un error buscando los tagdescriptors",category:"alerta-error"}});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(I.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{console.log(t),c({type:"SEARCH_TAGSDESCRIPTORS",payload:t})}catch(a){c({type:"SHOW_ERROR_TAGDESCRIPTOR",payload:{msg:"hubo un error buscando los tagdescriptors",category:"alerta-error"}})}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(I.a)(G.a.mark((function e(t){var a;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.get("/api/showtag/".concat(t));case 3:a=e.sent,console.log(a),c({type:"GET_TAGDESCRIPTOR",payload:a.data.tagdescriptor}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),c({type:"SHOW_ERROR_TAGDESCRIPTOR",payload:{msg:"No existe el tag descriptor",category:"alerta-error"}});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(I.a)(G.a.mark((function e(t){var a,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.post("/api/tagsdescriptors",t);case 3:a=e.sent,c({type:"CREATE_TAGDESCRIPTOR",payload:a.data}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),r={msg:e.t0.response.data.msg,category:"alerta-error"},c({type:"SHOW_ERROR_TAGDESCRIPTOR",payload:r});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(I.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.delete("/api/tagsdescriptors/".concat(t));case 3:c({type:"DELETE_TAGDESCRIPTOR",payload:t}),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),c({type:"SHOW_ERROR_TAGDESCRIPTOR",payload:{msg:"hubo un error eliminando el tag descriptor",category:"alerta-error"}});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(I.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.get("/api/showtag/".concat(t));case 3:c({type:"INVALIDATE_TAGDESCRIPTOR",payload:{msg:"El tag descriptor para ese tagname ya existe",category:"alerta-error"}}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c({type:"VALIDATE_TAGDESCRIPTOR"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(I.a)(G.a.mark((function e(t){var a,r;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t._id,e.next=4,M.put("/api/tagsdescriptors/".concat(a),t);case 4:r=e.sent,c({type:"UPDATE_TAGDESCRIPTOR",payload:r.data.tag_descriptor_modified}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(g.Provider,{value:{tagdescriptors:s.tagdescriptors,form:s.form,error:s.error,tagdescriptor:s.tagdescriptor,message:s.message,searchtagdescriptors:s.searchtagdescriptors,tagname_ok:s.tagname_ok,showForm:function(){c({type:"FORM_TAGDESCRIPTOR"})},getTagsDescriptors:o,createTagDescriptor:i,showError:function(){c({type:"SHOW_ERROR_TAGDESCRIPTOR"})},selectTagDescriptor:function(e){c({type:"SELECT_TAGDESCRIPTOR",payload:e})},deleteTagDescriptor:p,getTagDescriptor:u,deselectTagDescriptor:function(e){c({type:"DESELECT_TAGDESCRIPTOR"})},updateTagDescriptor:E,searchTagsDescriptors:l,resetMessage:function(){c({type:"RESET_MESSAGE"})},validateTagname:d}},e.children)},$=a(83),q=a(82),Q=function(e){var t=e.asset,a=Object(r.useContext)(C).selectAsset,s=Object(r.useContext)(y),c=s.getSystems,o=s.deselectSystem;return n.a.createElement("li",null,n.a.createElement("button",{type:"button",className:"btn btn-blank",onClick:function(){a(t),c(t._id),o()}},t.name))},X=function(){var e=Object(r.useContext)(C),t=e.assets,a=e.getAssets;return Object(r.useEffect)((function(){a()}),[]),0===t.length?n.a.createElement("p",null,"No hay assets creados, comienza creando uno"):n.a.createElement("ul",{className:"list-assets"},n.a.createElement($.a,null,t.map((function(e){return n.a.createElement(q.a,{key:e._id,timeout:200,classNames:"asset"},n.a.createElement(Q,{asset:e}))}))))},Z=function(){var e=Object(r.useContext)(C),t=e.form,a=e.showForm,s=e.addAsset,c=Object(r.useContext)(d).showAlert,o=Object(r.useState)({name:""}),l=Object(m.a)(o,2),p=l[0],E=l[1],b=p.name;return n.a.createElement(r.Fragment,null,n.a.createElement("button",{type:"button",className:"btn btn-block btn-primario",onClick:function(e){a()}},"Nuevo Asset"),t?n.a.createElement("form",{className:"form-new-system",onSubmit:function(e){e.preventDefault(),b?(s(p),E("")):c("El nombre del asset no debe estar vac\xedo","alerta-error")}},n.a.createElement("input",{type:"text",className:"input-text",placeholder:"Nombre del asset",name:"name",value:b,onChange:function(e){E(Object(i.a)({},p,Object(u.a)({},e.target.name,e.target.value)))}}),n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Agregar asset"})):null)},ee=function(){return n.a.createElement("aside",null,n.a.createElement("h1",null,"Estructura",n.a.createElement("span",null,"MdP")),n.a.createElement(Z,null),n.a.createElement("div",{className:"proyectos"},n.a.createElement("h2",null,"Assets"),n.a.createElement(X,null)),n.a.createElement("div",{className:"link-menu-div"},n.a.createElement(o.b,{to:"/menu",className:"link-menu"},"< Menu")))},te=function(){var e=Object(r.useContext)(y),t=e.systemSelected,a=e.message,s=e.addSystem,c=e.updateSystem,o=e.resetMessage,l=Object(r.useContext)(C).asset,p=Object(r.useContext)(d).showAlert,E=Object(r.useState)(!1),b=Object(m.a)(E,2),f=b[0],g=b[1],O=Object(r.useState)({name:""}),S=Object(m.a)(O,2),v=S[0],h=S[1];if(Object(r.useEffect)((function(){a&&(p(a.msg,a.category),o())}),[a]),Object(r.useEffect)((function(){h(t||{name:""})}),[t]),!l)return null;var T=v.name,R=Object(m.a)(l,1)[0];return n.a.createElement("div",{className:"formulario",onSubmit:function(e){e.preventDefault(),T?(g(!1),v.asset=R._id,v.active=!1,t?c(v):s(v),h({name:""})):p("El nombre del sistema no puede estar vac\xedo","alerta-error")}},n.a.createElement("form",null,n.a.createElement("div",{className:"contenedor-input"},n.a.createElement("input",{type:"text",className:"input-text",placeholder:"Nombre del sistema",name:"name",value:T,onChange:function(e){h(Object(i.a)({},v,Object(u.a)({},e.target.name,e.target.value)))}})),n.a.createElement("div",{className:"contenedor-input"},n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-submit btn-block",value:null===t?"Agregar sistema":"Guardar sistema"}))),f?n.a.createElement("p",{className:"mensaje error"},"El nombre del sistema es obligatorio"):null)},ae=function(e){var t=e.system,a=Object(r.useContext)(y),s=a.updateSystem,c=a.selectSystem,o=a.deleteSystem,l=function(){t.active=!t.active,s(t)};return n.a.createElement("li",{className:"tarea sombra"},n.a.createElement("p",null,t.name," "),n.a.createElement("div",{className:"estado"},t.active?n.a.createElement("button",{type:"button",className:"completo",onClick:function(){return l()}},"Activo"):n.a.createElement("button",{type:"button",className:"incompleto",onClick:function(){return l()}},"Desactivo")),n.a.createElement("div",{className:"acciones"},n.a.createElement("button",{type:"button",className:"btn btn-primario",onClick:function(){c(t)}},"Editar"),n.a.createElement("button",{type:"button",className:"btn btn-secundario",onClick:function(){Object(v.confirmAlert)({title:"Eliminar sistema",message:"Se eliminaran todos los descriptores asociados al sistema",buttons:[{label:"Yes",onClick:function(){o(t)}},{label:"No",onClick:function(){return console.log("no")}}]})}},"Eliminar")))},re=function(){var e=Object(r.useContext)(y).systems,t=Object(r.useContext)(C),a=t.asset,s=t.deleteAsset;if(!a)return n.a.createElement("h2",null,"Seleccione un asset");var c=Object(m.a)(a,1)[0];return n.a.createElement(r.Fragment,null,n.a.createElement("h2",null,"Sistemas asignados al asset: ",a.name),n.a.createElement("ul",null,0===e.length?n.a.createElement("li",{className:"tarea"},n.a.createElement("p",null,"No hay sistemas asignados al asset")):n.a.createElement($.a,null,e.map((function(e){return n.a.createElement(q.a,{key:e._id,timeout:200,classNames:"tarea"},n.a.createElement(ae,{system:e}))})))),n.a.createElement("button",{type:"button",className:"btn btn-eliminar",onClick:function(){Object(v.confirmAlert)({title:"Eliminar asset",message:"Se eliminaran todos los sistemas y descriptores asociados al asset",buttons:[{label:"Yes",onClick:function(){s(c)}},{label:"No",onClick:function(){return console.log("no")}}]})}},"Eliminar Asset \xd7"))},ne=function(){var e=Object(r.useContext)(p).getUser,t=Object(r.useContext)(C),a=t.message,s=t.resetMessage,c=Object(r.useContext)(d),o=c.alert,l=c.showAlert,u=Object(r.useContext)(y).deselectSystem;return Object(r.useEffect)((function(){e(),u()}),[]),Object(r.useEffect)((function(){a&&(l(a.msg,a.category),s())}),[a]),n.a.createElement("div",{className:"contenedor-app"},o?n.a.createElement("div",{className:"alerta ".concat(o.category)},o.msg," "):null,n.a.createElement(ee,null),n.a.createElement("div",{className:"seccion-principal"},n.a.createElement(f,null),n.a.createElement("main",null,n.a.createElement(te,null),n.a.createElement("div",{className:"contenedor-tareas"},n.a.createElement(re,null)))))},se=a(44),ce=function(e){var t=e.component,a=Object(se.a)(e,["component"]),s=Object(r.useContext)(p),c=s.getUser,o=s.authenticated,u=s.loading;return Object(r.useEffect)((function(){c()}),[]),n.a.createElement(l.b,Object.assign({},a,{render:function(e){return o||u?n.a.createElement(t,e):n.a.createElement(l.a,{to:"/"})}}))},oe=localStorage.getItem("token");U(oe);var le=function(){return n.a.createElement(Y,null,n.a.createElement(B,null,n.a.createElement(K,null,n.a.createElement(F,null,n.a.createElement(w,null,n.a.createElement(o.a,null,n.a.createElement(l.d,null,n.a.createElement(l.b,{exact:!0,path:"/",component:E}),n.a.createElement(l.b,{exact:!0,path:"/newuser",component:b}),n.a.createElement(ce,{exact:!0,path:"/tagsdescriptors",component:k}),n.a.createElement(ce,{exact:!0,path:"/assets",component:ne}),n.a.createElement(ce,{exact:!0,path:"/menu",component:z}))))))))};a(80),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.651ac6de.chunk.js.map